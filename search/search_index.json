{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"API Gateways","text":"<p>O API Gateway \u00e9 uma ferramenta que serve como um intermedi\u00e1rio entre os clientes e os servi\u00e7os de back-end.</p> <p>Atrav\u00e9s de uma interface unificada para servi\u00e7os, o Gateway permite que os clientes acessem suas funcionalidades sem precisar de um maior detalhamento da implementa\u00e7\u00e3o destes servi\u00e7os.</p>"},{"location":"#por-que-utilizar-um-api-gateway","title":"Por que utilizar um API Gateway?","text":"<p>O API Gateway fornece uma camada de abstra\u00e7\u00e3o entre os clientes e seus servi\u00e7os. Ele permite que os desenvolvedores encapsulem a complexidade interna dos seus servi\u00e7os e exponham APIs de forma transparente aos clientes.</p> <p>Al\u00e9m disso, ele fornece recursos adicionais como autentica\u00e7\u00e3o, autoriza\u00e7\u00e3o, limita\u00e7\u00e3o de taxa, balanceamento de carga e logging, reduzindo a complexidade de sua implementa\u00e7\u00e3o.</p>"},{"location":"#onde-implantar-o-api-gateway","title":"Onde implantar o API Gateway?","text":"<p>O API Gateway \u00e9 geralmente implementado na borda da rede, agindo como o ponto de entrada para todas as solicita\u00e7\u00f5es de API vindas de clientes externos.</p> <p>No entanto, ele tamb\u00e9m pode ser usado internamente para gerenciar a comunica\u00e7\u00e3o entre servi\u00e7os.</p>"},{"location":"#como-um-api-gateway-funciona","title":"Como um API Gateway funciona?","text":"<p>O API Gateway recebe uma solicita\u00e7\u00e3o de um cliente, determina para qual servi\u00e7o a solicita\u00e7\u00e3o deve ser encaminhada, encaminha a solicita\u00e7\u00e3o para esse servi\u00e7o e, em seguida, retorna a resposta do servi\u00e7o ao cliente.</p> <p>Ele tamb\u00e9m pode modificar a solicita\u00e7\u00e3o ou a resposta, ou acionar outras a\u00e7\u00f5es ou pol\u00edticas com base em regras pre-definidas.</p>"},{"location":"#capacidades","title":"Capacidades","text":"<p>Em sua maioria, os gateways possuem funcionalidades integradas que operam de forma nativa, no entanto, outras capacidades podem ser expandidas e at\u00e9 mesmo personalizadas atrav\u00e9s do uso de pol\u00edticas, extens\u00f5es ou plugins.</p>"},{"location":"kong-gateway/","title":"Kong Gateway","text":"<p>O Kong Gateway \u00e9 uma solu\u00e7\u00e3o robusta e extens\u00edvel para o gerenciamento de APIs, projetada para lidar com grandes volumes de tr\u00e1fego.</p> <p>Ele oferece funcionalidades avan\u00e7adas para controle, seguran\u00e7a e flexibilidade, atuando como middleware entre os consumidores de API e os servi\u00e7os upstream. Suas implementa\u00e7\u00f5es podem ser feitas on-premise, na nuvem ou em ambientes h\u00edbridos.</p>"},{"location":"kong-gateway/#principais-caracteristicas","title":"Principais Caracter\u00edsticas","text":""},{"location":"kong-gateway/#gerenciamento-de-trafego","title":"Gerenciamento de Tr\u00e1fego","text":""},{"location":"kong-gateway/#roteamento-inteligente","title":"Roteamento Inteligente","text":"<p>Direciona solicita\u00e7\u00f5es para diferentes servi\u00e7os de backend</p>"},{"location":"kong-gateway/#balanceamento-de-carga","title":"Balanceamento de Carga","text":"<p>Garante distribui\u00e7\u00e3o eficiente de requisi\u00e7\u00f5es para maior desempenho</p>"},{"location":"kong-gateway/#seguranca-de-api","title":"Seguran\u00e7a de API","text":""},{"location":"kong-gateway/#protecao-de-endpoints","title":"Prote\u00e7\u00e3o de Endpoints","text":"<p>Plugins nativos para autentica\u00e7\u00e3o, autoriza\u00e7\u00e3o e pol\u00edticas de seguran\u00e7a</p>"},{"location":"kong-gateway/#integracoes","title":"Integra\u00e7\u00f5es","text":"<p>Suporte a padr\u00f5es como OAuth2 e OpenID Connect, al\u00e9m de criptografia e prote\u00e7\u00e3o contra ataques DDoS</p>"},{"location":"kong-gateway/#monitoramento-e-observabilidade","title":"Monitoramento e Observabilidade","text":""},{"location":"kong-gateway/#integracao-com-ferramentas","title":"Integra\u00e7\u00e3o com Ferramentas","text":"<p>Compat\u00edvel com Prometheus, Grafana e OpenTelemetry para m\u00e9tricas e logs</p>"},{"location":"kong-gateway/#plugins-e-extensibilidade","title":"Plugins e Extensibilidade","text":""},{"location":"kong-gateway/#ecossistema-de-plugins","title":"Ecossistema de Plugins","text":"<p>Recursos como caching, limita\u00e7\u00e3o de taxa e transforma\u00e7\u00e3o de mensagens</p>"},{"location":"kong-gateway/#personalizacao","title":"Personaliza\u00e7\u00e3o","text":"<p>Desenvolvimento de plugins espec\u00edficos para requisitos empresariais</p>"},{"location":"kong-gateway/#integracao-com-kubernetes","title":"Integra\u00e7\u00e3o com Kubernetes","text":"<p>Atua como Ingress Controller, gerenciando APIs e facilitando controle de tr\u00e1fego em arquiteturas de microsservi\u00e7os.</p>"},{"location":"kong-gateway/#vantagens-do-kong-gateway-para-empresas","title":"Vantagens do Kong Gateway para Empresas","text":""},{"location":"kong-gateway/#escalabilidade","title":"Escalabilidade","text":"<p>Projeta-se para suportar grandes volumes de tr\u00e1fego, com adi\u00e7\u00e3o ou remo\u00e7\u00e3o de recursos sem interrup\u00e7\u00f5es.</p>"},{"location":"kong-gateway/#arquitetura-flexivel-e-extensivel","title":"Arquitetura Flex\u00edvel e Extens\u00edvel","text":"<p>Adapta\u00e7\u00e3o a diferentes infraestruturas com suporte nativo e extens\u00f5es via plugins.</p>"},{"location":"kong-gateway/#desempenho","title":"Desempenho","text":""},{"location":"kong-gateway/#alta-performance","title":"Alta Performance","text":"<p>Baseado no NGINX, com lat\u00eancias reduzidas e alto throughput</p>"},{"location":"kong-gateway/#comunidade-e-suporte","title":"Comunidade e Suporte","text":"<p>Comunidade ativa, contribui\u00e7\u00f5es frequentes e suporte empresarial confi\u00e1vel.</p>"},{"location":"kong-gateway/#modelos-de-licenciamento","title":"Modelos de Licenciamento","text":""},{"location":"kong-gateway/#open-source","title":"Open Source","text":"<p>Dispon\u00edvel como pacote de c\u00f3digo aberto, a vers\u00e3o do Kong oferece funcionalidades essenciais de um API Gateway, incluindo plugins da comunidade.</p> <p>\u00c9 uma solu\u00e7\u00e3o robusta para quem precisa de um gerenciamento b\u00e1sico de APIs com um conjunto de recursos amplamente utilizados, sem custos adicionais.</p>"},{"location":"kong-gateway/#vantagens","title":"Vantagens","text":"<ul> <li> <p>Custo Zero: A vers\u00e3o Open Source \u00e9 totalmente gratuita, tornando-a uma excelente op\u00e7\u00e3o para pequenas empresas, startups e ambientes de teste.</p> </li> <li> <p>Funcionalidades Essenciais: Oferece recursos fundamentais de um API Gateway, como roteamento de tr\u00e1fego, balanceamento de carga, autentica\u00e7\u00e3o e autoriza\u00e7\u00e3o, entre outros.</p> </li> <li> <p>Plugins Comunit\u00e1rios: Acesso a uma grande variedade de plugins desenvolvidos pela comunidade, que podem ser usados para estender as funcionalidades do Kong.</p> </li> <li> <p>Gerenciamento Flex\u00edvel: Pode ser gerenciado atrav\u00e9s da Admin API do Kong, do Kong Manager Open Source ou utilizando configura\u00e7\u00f5es declarativas (YAML), oferecendo flexibilidade na administra\u00e7\u00e3o.</p> </li> <li> <p>Documenta\u00e7\u00e3o e Suporte da Comunidade: A comunidade ativa oferece suporte e contribui\u00e7\u00f5es constantes, al\u00e9m de uma documenta\u00e7\u00e3o completa e constantemente atualizada.</p> </li> <li> <p>Escalabilidade: Embora n\u00e3o ofere\u00e7a todos os recursos avan\u00e7ados da vers\u00e3o Enterprise, o Kong Open Source ainda \u00e9 escal\u00e1vel e pode ser utilizado em diversos cen\u00e1rios, desde pequenas implementa\u00e7\u00f5es at\u00e9 ambientes de maior porte.</p> </li> </ul>"},{"location":"kong-gateway/#desvantagens","title":"Desvantagens","text":"<ul> <li> <p>Falta de Controle Granular (RBAC): A vers\u00e3o Open Source n\u00e3o inclui recursos de controle de acesso baseado em fun\u00e7\u00e3o (RBAC), o que significa que voc\u00ea ter\u00e1 que contar com controle de acesso externo, como firewalls, proxies ou autentica\u00e7\u00e3o b\u00e1sica, para gerenciar quem pode acessar a Admin API ou o Kong Manager.</p> </li> <li> <p>Suporte Limitado: Enquanto a vers\u00e3o Enterprise conta com suporte oficial e servi\u00e7os de SLA, a vers\u00e3o Open Source depende do suporte da comunidade, o que pode ser um desafio em ambientes cr\u00edticos.</p> </li> <li> <p>Funcionalidades Avan\u00e7adas Restritas: Recursos como suporte a m\u00faltiplos ambientes, gerenciamento de consumidores, plugins de seguran\u00e7a avan\u00e7ados e algumas integra\u00e7\u00f5es, como por exemplo vaults, est\u00e3o dispon\u00edveis apenas na vers\u00e3o Enterprise.</p> </li> <li> <p>Falta de Garantias de Alta Disponibilidade e Failover: A vers\u00e3o Open Source n\u00e3o oferece garantias de alta disponibilidade ou failover autom\u00e1tico, recursos essenciais em ambientes de produ\u00e7\u00e3o cr\u00edticos.</p> </li> </ul>"},{"location":"kong-gateway/#enterprise","title":"Enterprise","text":"<p>API Gateway com funcionalidade adicional. Apesar de ser uma vers\u00e3o corporativa, pode ser utilizado em vers\u00e3o Free, sem o uso de licen\u00e7a.</p>"},{"location":"kong-gateway/#rbac","title":"RBAC","text":"<p>Uma das funcionalidades adicionais do Kong Enterprise \u00e9 o controle de acesso baseado em fun\u00e7\u00e3o (RBAC - Role-Based Access Control), essencial para gerenciar permiss\u00f5es de forma granular, assegurando que diferentes usu\u00e1rios e sistemas tenham apenas os acessos necess\u00e1rios.</p> <ul> <li>Usu\u00e1rios e Grupos: Cada usu\u00e1rio pode ser associado a fun\u00e7\u00f5es ou grupos com permiss\u00f5es espec\u00edficas.</li> <li>Fun\u00e7\u00f5es (Roles): Definem os conjuntos de permiss\u00f5es que determinam o que os usu\u00e1rios podem acessar ou modificar.</li> <li>Permiss\u00f5es: Controles espec\u00edficos atribu\u00eddos \u00e0s fun\u00e7\u00f5es, como leitura, escrita ou execu\u00e7\u00e3o em recursos do Kong, incluindo servi\u00e7os, rotas, plugins, etc.</li> <li>Tokens: Gera\u00e7\u00e3o de tokens de acesso para autenticar e autorizar solicita\u00e7\u00f5es de APIs administrativas.</li> </ul>"},{"location":"kong-gateway/#kong-konnect","title":"Kong Konnect","text":"<p>Plataforma completa para o ciclo de vida de APIs, com monitoramento em tempo real e painel centralizado.</p>"},{"location":"kong-gateway/#ambientes-compativeis","title":"Ambientes Compat\u00edveis","text":"<p>Nuvens p\u00fablicas, privadas, h\u00edbridas e on-premise</p> <p>Integra\u00e7\u00e3o nativa com Kubernetes para maior controle de tr\u00e1fego e suporte a arquiteturas modernas.</p>"},{"location":"termos-tecnicos/","title":"Gloss\u00e1rio","text":""},{"location":"termos-tecnicos/#autenticacao","title":"Autentica\u00e7\u00e3o","text":"<p>Processo de verificar a identidade de um cliente que tenta acessar um recurso.</p>"},{"location":"termos-tecnicos/#autorizacao","title":"Autoriza\u00e7\u00e3o","text":"<p>Processo de verificar se um cliente autenticado tem permiss\u00e3o para acessar um recurso.</p>"},{"location":"termos-tecnicos/#roteamento","title":"Roteamento","text":"<p>A capacidade de direcionar solicita\u00e7\u00f5es para diferentes servi\u00e7os com base em seu conte\u00fado.</p>"},{"location":"termos-tecnicos/#limitacao-de-taxa","title":"Limita\u00e7\u00e3o de Taxa","text":"<p>Uma t\u00e9cnica usada para limitar o n\u00famero de solicita\u00e7\u00f5es que um cliente pode fazer para um servi\u00e7o em um determinado per\u00edodo de tempo.</p>"},{"location":"termos-tecnicos/#transformacao-de-resposta","title":"Transforma\u00e7\u00e3o de Resposta","text":"<p>A capacidade de modificar a resposta de um servi\u00e7o antes de envi\u00e1-la de volta ao cliente.</p>"},{"location":"termos-tecnicos/#tipos-de-gateway","title":"Tipos de Gateway","text":""},{"location":"termos-tecnicos/#gateway-publico","title":"Gateway P\u00fablico","text":"<p>O Gateway P\u00fablico \u00e9 um tipo de API Gateway que \u00e9 exposto \u00e0 internet e pode ser acessado por qualquer cliente. Ele \u00e9 comumente usado para expor APIs p\u00fablicas que s\u00e3o destinadas ao consumo p\u00fablico.</p>"},{"location":"termos-tecnicos/#gateway-privado","title":"Gateway Privado","text":"<p>Gateway Privado \u00e9 uma camada acess\u00edvel apenas dentro de uma rede privada e \u00e9 usado para expor APIs que s\u00e3o destinadas ao consumo interno dentro de uma organiza\u00e7\u00e3o, por diferentes consumidores.</p>"},{"location":"termos-tecnicos/#gateway-de-parceiro","title":"Gateway de Parceiro","text":"<p>O Gateway de Parceiro, que \u00e9 um tipo de API Gateway compartilhado com parceiros de neg\u00f3cios espec\u00edficos. Ele permite a colabora\u00e7\u00e3o segura e eficiente entre diferentes organiza\u00e7\u00f5es.</p>"},{"location":"termos-tecnicos/#monetizacao","title":"Monetiza\u00e7\u00e3o","text":"<p>A cobran\u00e7a em API Gateways \u00e9 um aspecto crucial que determina o custo de opera\u00e7\u00e3o de suas APIs, podendo ser uma forma de tornar seu API Gateway um produto interno ou externo \u00e0 organiza\u00e7\u00e3o.</p> <p>Geralmente, a cobran\u00e7a \u00e9 baseada em v\u00e1rios fatores, como o n\u00famero de solicita\u00e7\u00f5es feitas, a quantidade de dados transferidos e o armazenamento de dados.</p> <p>\u00c9 importante entender esses modelos de precifica\u00e7\u00e3o para gerenciar efetivamente os custos e garantir que seu API Gateway seja econ\u00f4mico.</p>"},{"location":"termos-tecnicos/#monetizacao-por-requisicao","title":"Monetiza\u00e7\u00e3o por Requisi\u00e7\u00e3o","text":"<p>Um modelo de precifica\u00e7\u00e3o onde os clientes s\u00e3o cobrados com base no n\u00famero de solicita\u00e7\u00f5es que fazem.</p>"},{"location":"termos-tecnicos/#monetizacao-por-largura-de-banda","title":"Monetiza\u00e7\u00e3o por Largura de Banda","text":"<p>Um modelo de precifica\u00e7\u00e3o onde os clientes s\u00e3o cobrados com base na quantidade de largura de banda que suas solicita\u00e7\u00f5es usam.</p>"},{"location":"termos-tecnicos/#monetizacao-por-armazenamento","title":"Monetiza\u00e7\u00e3o por Armazenamento","text":"<p>Um modelo de precifica\u00e7\u00e3o onde os clientes s\u00e3o cobrados com base na quantidade de dados que armazenam atrav\u00e9s do API Gateway.</p>"},{"location":"APIs/routes/","title":"Routes","text":"<p>Uma Route no Kong \u00e9 uma defini\u00e7\u00e3o que conecta um servi\u00e7o a uma solicita\u00e7\u00e3o de cliente. Ao configurar uma Route, voc\u00ea especifica como as solicita\u00e7\u00f5es HTTP devem ser endere\u00e7adas para os servi\u00e7os adequados no seu backend.</p> <p>Isso inclui a defini\u00e7\u00e3o de crit\u00e9rios como:</p> <ul> <li>m\u00e9todo HTTP;</li> <li>cabe\u00e7alhos;</li> <li>caminho de URL;</li> <li>hosts.</li> </ul> <p>Em termos simples, uma rota atua como um mapeamento entre o que o cliente solicita e onde essa solicita\u00e7\u00e3o deve ser encaminhada no backend.</p> <p>No contexto de neg\u00f3cios, essa capacidade garante que as solicita\u00e7\u00f5es dos clientes sejam tratadas de maneira eficiente e direcionadas ao servi\u00e7o correto, aumentando a confiabilidade e a satisfa\u00e7\u00e3o do cliente.</p>"},{"location":"APIs/routes/#por-que-usar-routes","title":"Por que usar Routes?","text":"<p>A utiliza\u00e7\u00e3o de rotas permite uma gest\u00e3o mais granular e flex\u00edvel do tr\u00e1fego de rede, garantindo que cada solicita\u00e7\u00e3o seja processada pelo servi\u00e7o mais apropriado.</p> <p>Al\u00e9m disso, facilita a implementa\u00e7\u00e3o de pol\u00edticas de seguran\u00e7a e conformidade, ao assegurar que apenas solicita\u00e7\u00f5es v\u00e1lidas sejam encaminhadas aos servi\u00e7os internos.</p> <p>Finalmente, otimiza a performance e a escalabilidade do sistema, permitindo uma distribui\u00e7\u00e3o equilibrada de carga entre diferentes servi\u00e7os, o que \u00e9 crucial para manter a qualidade do servi\u00e7o em um setor t\u00e3o competitivo.</p>"},{"location":"APIs/routes/#como-configurar-uma-route-no-kong","title":"Como configurar uma Route no Kong?","text":"<p>Para configurar uma Route no Kong, voc\u00ea precisa definir os crit\u00e9rios de roteamento, que podem incluir m\u00e9todos HTTP, cabe\u00e7alhos, caminhos de URL e hosts.</p> <p>Isso geralmente \u00e9 feito por meio da API de administra\u00e7\u00e3o do Kong ou API administrativa.</p> <p>A configura\u00e7\u00e3o de m\u00e9todos espec\u00edficos em uma rota no Kong permite que os desenvolvedores definam quais m\u00e9todos HTTP (como GET, POST, PUT, DELETE, etc.) s\u00e3o permitidos em uma determinada rota.</p> <p>Isso adiciona uma camada de controle e seguran\u00e7a, garantindo que apenas os m\u00e9todos desejados possam ser utilizados para interagir com os endpoints espec\u00edficos da API. Essa configura\u00e7\u00e3o ajuda a prevenir acesso indevido e opera\u00e7\u00f5es n\u00e3o autorizadas em recursos protegidos.</p>"},{"location":"APIs/routes/#via-api-administrativa","title":"Via API administrativa","text":"<p>Exemplo de configura\u00e7\u00e3o:</p> <pre><code>curl -i -X POST \\\n  --url http://admin-url:8001/routes \\\n  --data '{\n    \"hosts\": [\"api.exemplo.com\"],\n    \"paths\": [\"/caminho-exemplo\"],\n    \"methods\": [\"GET\", \"POST\"],\n    \"protocols\": [\"http\", \"https\"],\n    \"strip_path\": true,\n    \"preserve_host\": false,\n    \"service\": {\n      \"id\": \"id_do_seu_servico\"\n    }\n  }'\n</code></pre>"},{"location":"APIs/routes/#via-deck","title":"Via decK","text":"<p>Exemplo de configura\u00e7\u00e3o:</p> <pre><code>_format_version: \"1.1\"\nroutes:\n- name: example-route\n  hosts:\n  - api.exemplo.com\n  paths:\n  - /caminho-exemplo\n  methods:\n  - GET\n  - POST\n  protocols:\n  - http\n  - https\n  strip_path: true\n  preserve_host: false\n  service:\n    id: id_do_seu_servico\n</code></pre> <ul> <li>Observa\u00e7\u00e3o: mais detalhes sobre como configurar o decK na se\u00e7\u00e3o do decK</li> </ul>"},{"location":"APIs/routes/#via-kong-manager","title":"Via Kong Manager","text":"<p>Exemplo de configura\u00e7\u00e3o de rota: </p>"},{"location":"APIs/routes/#fallback-route","title":"Fallback route","text":"<p>Um bom caso de uso \u00e9 a cria\u00e7\u00e3o de um endpoint <code>/</code> respons\u00e1vel por lidar com o tr\u00e1fego de endpoints inexistentes.</p> <p>Esta rota \u00e9 chamada de fallback route e atua como um endpoint que serve a todas as rotas n\u00e3o definidas, podendo trazer uma mensagem de exce\u00e7\u00e3o adequada(para configurar uma mensagem personalizada, utilize o plugin <code>request termination</code>).</p> <p>Mais detalhes sobre a configura\u00e7\u00e3o de rotas, servi\u00e7os e seus par\u00e2metros podem ser vistas na documenta\u00e7\u00e3o oficial.</p>"},{"location":"APIs/services/","title":"Services","text":"<p>Um Service no Kong representa um servi\u00e7o upstream (de backend) que ser\u00e1 acessado por meio do Kong.</p> <p>Essencialmente, \u00e9 uma abstra\u00e7\u00e3o que define o servi\u00e7o real que responde \u00e0s solicita\u00e7\u00f5es HTTP ou HTTPS. Um Service cont\u00e9m informa\u00e7\u00f5es como o URL de destino, portas e outras configura\u00e7\u00f5es relevantes.</p> <p>No contexto de neg\u00f3cios, isso significa que voc\u00ea pode gerenciar e configurar como o tr\u00e1fego \u00e9 direcionado para os seus servi\u00e7os de backend de forma centralizada e eficiente, garantindo uma experi\u00eancia de usu\u00e1rio final mais confi\u00e1vel e consistente.</p>"},{"location":"APIs/services/#por-que-usar-services","title":"Por que usar Services?","text":"<p>Utilizar Services no Kong oferece in\u00fameros benef\u00edcios como a centraliza\u00e7\u00e3o da gest\u00e3o dos servi\u00e7os de backend, facilitando a manuten\u00e7\u00e3o e a atualiza\u00e7\u00e3o.</p> <p>H\u00e1 melhoras em seguran\u00e7a ao controlar como e quando os servi\u00e7os s\u00e3o acessados, controlado por pol\u00edticas.</p> <p>Al\u00e9m disso, aumenta a efici\u00eancia operacional, permitindo a configura\u00e7\u00e3o e o roteamento inteligente do tr\u00e1fego, otimizando a performance e a escalabilidade dos servi\u00e7os.</p>"},{"location":"APIs/services/#como-configurar-um-service","title":"Como configurar um Service?","text":"<p>Para configurar um Service no Kong, voc\u00ea precisa definir as informa\u00e7\u00f5es do servi\u00e7o upstream, como o URL de destino, portas e outras configura\u00e7\u00f5es espec\u00edficas.</p> <p>Isso geralmente \u00e9 feito por meio da API de administra\u00e7\u00e3o do Kong ou atrav\u00e9s de um arquivo de configura\u00e7\u00e3o.</p> <p>Ap\u00f3s definir o Service, voc\u00ea pode associ\u00e1-lo a uma ou mais Routes, garantindo que as solicita\u00e7\u00f5es sejam direcionadas corretamente.</p> <p>A configura\u00e7\u00e3o pode ser ajustada conforme necess\u00e1rio para responder a mudan\u00e7as nas necessidades de tr\u00e1fego ou nos requisitos de seguran\u00e7a, garantindo uma opera\u00e7\u00e3o cont\u00ednua e eficiente.</p>"},{"location":"APIs/services/#via-api-administrativa","title":"Via API administrativa","text":"<p>Configura\u00e7\u00e3o de um servi\u00e7o backend</p> <pre><code>curl -i -X POST http://admin-url:8001/services \\\n  --header \"Content-Type: application/json\" \\\n  --data '{\n  \"name\": \"complete-service\",\n  \"url\": \"http://example.com\",\n  \"retries\": 5,\n  \"connect_timeout\": 3000,\n  \"write_timeout\": 3000,\n  \"read_timeout\": 3000,\n  \"protocol\": \"http\",\n  \"host\": \"example.com\",\n  \"port\": 80,\n  \"path\": \"/api\",\n  \"tags\": [\"example-tag\"],\n  \"client_certificate\": \"YOUR_CERTIFICATE_ID\"\n  }'\n</code></pre> <p>Um service somente poder\u00e1 ser acessado se tiver um route associado a ele e n\u00e3o poder\u00e1 ser removido se ainda houver um route associado.</p>"},{"location":"APIs/services/#via-deck","title":"Via decK","text":"<p>Exemplo de configura\u00e7\u00e3o:</p> <pre><code>_format_version: \"1.1\"\nservices:\n- name: complete-service\n  url: http://example.com\n  retries: 5\n  connect_timeout: 3000\n  write_timeout: 3000\n  read_timeout: 3000\n  protocol: http\n  host: example.com\n  port: 80\n  path: /api\n  tags:\n  - example-tag\n  client_certificate:\n    id: YOUR_CERTIFICATE_ID\n</code></pre> <ul> <li>Observa\u00e7\u00e3o: mais detalhes sobre como configurar o decK na se\u00e7\u00e3o do decK.</li> </ul>"},{"location":"APIs/services/#via-kong-manager","title":"Via Kong Manager","text":"<p>Exemplo de configura\u00e7\u00e3o de service: </p> <p>Mais detalhes podem ser obtidos da documenta\u00e7\u00e3o oficial.</p>"},{"location":"deck/boas-praticas/","title":"Boas pr\u00e1ticas","text":""},{"location":"deck/boas-praticas/#uso-de-scripts","title":"Uso de scripts","text":"<p>Sempre garanta que voc\u00ea tenha apenas um processo decK em execu\u00e7\u00e3o. V\u00e1rios processos se sobrep\u00f5em e podem corromper a configura\u00e7\u00e3o do Kong.</p> <p>N\u00e3o misture a configura\u00e7\u00e3o declarativa do decK com cURL ou qualquer outro script.</p> <p>Ou gerencie a configura\u00e7\u00e3o com o decK, ou gerencie com seu pr\u00f3prio script Misturar os dois no mesmo conjunto de dados \u00e9 trabalhoso e propenso a erros.</p>"},{"location":"deck/boas-praticas/#implantacao-distribuida","title":"Implanta\u00e7\u00e3o distribu\u00edda","text":"<p>Se voc\u00ea tiver uma instala\u00e7\u00e3o muito grande, poder\u00e1 dividir sua configura\u00e7\u00e3o em subconjuntos menores</p>"},{"location":"deck/boas-praticas/#versoes","title":"Vers\u00f5es","text":"<p>Sempre use uma vers\u00e3o complementar do decK e do Kong Gateway. Sempre use uma vers\u00e3o espec\u00edfica do decK em produ\u00e7\u00e3o para obter a configura\u00e7\u00e3o declarativa.</p> <p>Se voc\u00ea atualizar para uma nova vers\u00e3o do decK ou do Kong Gateway, teste as altera\u00e7\u00f5es com seguran\u00e7a em um ambiente de homologa\u00e7\u00e3o primeiro.</p>"},{"location":"deck/boas-praticas/#criptografia","title":"Criptografia","text":"<p>O decK n\u00e3o gerencia a criptografia de informa\u00e7\u00f5es confidenciais. O arquivo de estado armazena as chaves privadas de seus certificados e credenciais de consumidores em texto simples.</p> <p>Tenha cuidado em como e onde voc\u00ea armazena esse arquivo para evitar viola\u00e7\u00f5es de seguran\u00e7a.</p> <p>Sempre armazene as informa\u00e7\u00f5es confidenciais em um formato criptografado e forne\u00e7a uma vers\u00e3o em texto simples delas somente quando necess\u00e1rio.</p> <p>Se voc\u00ea tiver muitos consumidores em seu banco de dados, n\u00e3o os exporte ou gerencie usando o decK.</p> <p>A configura\u00e7\u00e3o declarativa \u00e9 destinada apenas para configura\u00e7\u00e3o de entidade e n\u00e3o \u00e9 destinada para dados do usu\u00e1rio final, que podem facilmente crescer para centenas de milhares ou milh\u00f5es de registros.</p>"},{"location":"deck/boas-praticas/#ci","title":"CI","text":"<p>Sempre execute um comando diff antes de executar uma sincroniza\u00e7\u00e3o para garantir que a altera\u00e7\u00e3o esteja correta</p> <p>Adote uma pr\u00e1tica de configura\u00e7\u00e3o orientada por CI.</p>"},{"location":"deck/boas-praticas/#autenticacao","title":"Autentica\u00e7\u00e3o","text":"<p>Sempre proteja a API administrativa do Kong com um m\u00e9todo de autentica\u00e7\u00e3o confi\u00e1vel</p>"},{"location":"deck/boas-praticas/#desenvolvimento","title":"Desenvolvimento","text":"<p>N\u00e3o escreva o arquivo de estado manualmente para evitar erros. Prefira a API administrativa do Kong para configurar o Kong Gateway pela primeira vez e, em seguida, exporte a configura\u00e7\u00e3o para um arquivo de configura\u00e7\u00e3o declarativa</p> <p>Quaisquer altera\u00e7\u00f5es subsequentes devem ser feitas editando manualmente o arquivo e enviando a altera\u00e7\u00e3o via CI.</p> <p>Se voc\u00ea estiver fazendo uma altera\u00e7\u00e3o maior, fa\u00e7a a altera\u00e7\u00e3o no Kong Gateway primeiro e, em seguida, exporte o novo arquivo.</p> <p>Em seguida, voc\u00ea pode diferenciar os dois arquivos de estado para revisar as altera\u00e7\u00f5es que est\u00e3o sendo feitas.</p>"},{"location":"deck/boas-praticas/#cronjob","title":"Cronjob","text":"<p>Configure um cronjob para executar um diff periodicamente para garantir que o banco de dados do Kong Gateway esteja sincronizado com o arquivo de estado verificando seus reposit\u00f3rios Git.</p> <p>Dispare um alerta se o decK detectar um desvio na configura\u00e7\u00e3o</p>"},{"location":"deck/deck-cli/","title":"Declarative Kong CLI","text":"<p>O <code>deck</code> (Declarative Configuration CLI for Kong) \u00e9 uma ferramenta que permite gerenciar a configura\u00e7\u00e3o de uma inst\u00e2ncia do Kong de maneira declarativa, com arquivos de configura\u00e7\u00e3o YAML.</p> <p>Esse modelo declarativo facilita o versionamento, backup e restaura\u00e7\u00e3o das configura\u00e7\u00f5es do Kong, simplificando a ger\u00eancia de ambientes complexos.</p>"},{"location":"deck/deck-cli/#pre-requisitos","title":"Pr\u00e9-requisitos","text":"<p>Para utilizar o <code>deck</code>, voc\u00ea precisar\u00e1 de:</p> <ul> <li>Uma inst\u00e2ncia do Kong Gateway rodando (Community ou Enterprise).</li> <li>Go 1.17 ou superior (para compilar o <code>deck</code> caso prefira instal\u00e1-lo diretamente do c\u00f3digo).</li> <li>Docker.</li> </ul>"},{"location":"deck/deck-cli/#como-funciona-o-deck","title":"Como Funciona o deck","text":"<p>O deck usa um arquivo YAML para descrever a configura\u00e7\u00e3o completa do Kong Gateway. Com o deck, voc\u00ea pode:</p> <ul> <li>Exportar a configura\u00e7\u00e3o atual do Kong para um arquivo YAML.</li> <li>Aplicar um arquivo de configura\u00e7\u00e3o YAML ao Kong para criar ou atualizar recursos.</li> <li>Realizar backup e restaura\u00e7\u00e3o de configura\u00e7\u00f5es.</li> <li>Estrutura de Configura\u00e7\u00e3o do deck</li> </ul> <p>Um arquivo deck.yaml pode conter:</p> <ul> <li>Configura\u00e7\u00f5es de servi\u00e7os e rotas.</li> <li>Configura\u00e7\u00f5es de plugins.</li> <li>Configura\u00e7\u00f5es de consumidores e credenciais.</li> </ul> <p>Exemplo b\u00e1sico de um arquivo deck.yaml:</p> <pre><code>_format_version: \"1.1\"\nservices:\n\n- name: example-service\n    url: &lt;http://example.com&gt;\n    routes:\n  - name: example-route\n        paths:\n    - /example\nplugins:\n- name: rate-limiting\n    config:\n      minute: 20\n      hour: 500\nconsumers:\n- username: example-consumer\n    credentials:\n  - key-auth: my-api-key\n</code></pre> <p>Para mais informa\u00e7\u00f5es, consulte a documenta\u00e7\u00e3o oficial do deck.</p>"},{"location":"deck/deck-cli/#casos-de-uso","title":"Casos de uso","text":""},{"location":"deck/deck-cli/#versionamento-de-configuracoes","title":"Versionamento de Configura\u00e7\u00f5es","text":"<p>O deck permite gerenciar configura\u00e7\u00f5es de forma declarativa, facilitando o controle de vers\u00f5es dos recursos do Kong.</p> <p>Mudan\u00e7as nas configura\u00e7\u00f5es poder\u00e3o ser rastreadas, revisadas e revertidas conforme necess\u00e1rio, o que \u00e9 \u00fatil em equipes que seguem pr\u00e1ticas de DevOps.</p>"},{"location":"deck/deck-cli/#automacao-de-deploys","title":"Automa\u00e7\u00e3o de Deploys","text":"<p>Automatizar a implanta\u00e7\u00e3o de configura\u00e7\u00f5es em diferentes ambientes, como desenvolvimento, testes e produ\u00e7\u00e3o \u00e9 um processo facilitado com o uso do deck.</p> <p>Arquivos YAML podem ser usados em pipelines CI/CD para garantir que o ambiente de produ\u00e7\u00e3o receba as configura\u00e7\u00f5es exatas necess\u00e1rias.</p>"},{"location":"deck/deck-cli/#backup-e-restauracao-de-configuracoes","title":"Backup e Restaura\u00e7\u00e3o de Configura\u00e7\u00f5es","text":"<p>Atrav\u00e9s do deck, \u00e9 poss\u00edvel exportar toda a configura\u00e7\u00e3o de um Kong Gateway em funcionamento para um arquivo YAML, o que serve como backup.</p> <p>Esse backup pode ser restaurado rapidamente em caso de falhas ou ao migrar para uma nova inst\u00e2ncia.</p>"},{"location":"deck/deck-cli/#gerenciamento-de-ambientes-complexos","title":"Gerenciamento de Ambientes Complexos","text":"<p>Em ambientes onde m\u00faltiplas inst\u00e2ncias do Kong s\u00e3o usadas (por exemplo, em ambientes h\u00edbridos ou multinuvem), o deck permite gerenciar todas as configura\u00e7\u00f5es de forma centralizada e uniforme.</p> <p>Isso ajuda a garantir consist\u00eancia entre diferentes inst\u00e2ncias do Kong.</p>"},{"location":"deck/deck-cli/#auditoria-e-conformidade","title":"Auditoria e Conformidade","text":"<p>Usar arquivos YAML declarativos com o deck facilita auditorias de configura\u00e7\u00e3o e ajuda a garantir que a configura\u00e7\u00e3o do Kong esteja em conformidade com padr\u00f5es de seguran\u00e7a e requisitos regulamentares.</p>"},{"location":"deck/deck-cli/#migracao-de-configuracoes","title":"Migra\u00e7\u00e3o de Configura\u00e7\u00f5es","text":"<p>Com o deck, \u00e9 poss\u00edvel exportar as configura\u00e7\u00f5es de uma inst\u00e2ncia do Kong e aplic\u00e1-las a outra, facilitando migra\u00e7\u00f5es de ambiente ou atualiza\u00e7\u00f5es entre vers\u00f5es do Kong Gateway.</p>"},{"location":"deck/deck-cli/#facilidade-de-gerenciamento-em-equipes","title":"Facilidade de Gerenciamento em Equipes","text":"<p>O deck permite que equipes trabalhem de maneira colaborativa no gerenciamento do Kong, usando sistemas de controle de vers\u00e3o como Git para armazenar e compartilhar as configura\u00e7\u00f5es YAML, simplificando o trabalho em equipe.</p> <p>Esses casos de uso tornam o deck uma ferramenta valiosa para empresas que buscam consist\u00eancia, efici\u00eancia e controle no gerenciamento de suas configura\u00e7\u00f5es do Kong Gateway.</p>"},{"location":"deck/instalacao/","title":"Guia de Instala\u00e7\u00e3o do deck","text":"<p>O <code>deck</code> (Declarative Configuration CLI for Kong) \u00e9 uma ferramenta usada para gerenciar a configura\u00e7\u00e3o do Kong Gateway de forma declarativa. Este guia cobre a instala\u00e7\u00e3o via Docker e a instala\u00e7\u00e3o padr\u00e3o diretamente no sistema.</p>"},{"location":"deck/instalacao/#pre-requisitos","title":"Pr\u00e9-requisitos","text":"<ul> <li>Docker: Se optar pela instala\u00e7\u00e3o via container Docker.</li> </ul>"},{"location":"deck/instalacao/#instalacao-do-deck-via-docker","title":"Instala\u00e7\u00e3o do deck via Docker","text":"<p>A forma mais r\u00e1pida de iniciar o <code>deck</code> \u00e9 utilizando o Docker. Isso permite que voc\u00ea utilize o <code>deck</code> sem precisar configurar o bin\u00e1rio diretamente no seu sistema.</p>"},{"location":"deck/instalacao/#baixar-a-imagem-docker","title":"Baixar a Imagem Docker","text":"<p>Para baixar a imagem do <code>deck</code>, execute:</p> <pre><code>docker pull kong/deck\n</code></pre>"},{"location":"deck/instalacao/#configurar-variaveis-de-ambiente","title":"Configurar Vari\u00e1veis de Ambiente","text":"<p>Para que o deck se comunique com a API Admin do Kong, voc\u00ea deve configurar as seguintes vari\u00e1veis de ambiente:</p> <pre><code>KONG_ADMIN_URL: URL da API Admin do Kong ## &lt;http://localhost:8001&gt;).\nKONG_ADDR: Endere\u00e7o do Kong. Se estiver usando HTTPS, inclua https://\n</code></pre> <p>Exemplo de configura\u00e7\u00e3o:</p> <pre><code>export KONG_ADMIN_URL=\"http://localhost:8001\"\nexport KONG_ADDR=\"https://localhost:8444\"\n</code></pre>"},{"location":"deck/instalacao/#executar-o-deck-com-docker","title":"Executar o deck com Docker","text":"<p>Com as vari\u00e1veis configuradas, execute o deck no Docker substituindo<code>&lt;command&gt;</code> pelo comando desejado (por exemplo, deck ping, deck sync, etc.):</p> <pre><code>docker run --rm -e KONG_ADMIN_URL kong/deck &lt;command&gt;\n</code></pre>"},{"location":"deck/instalacao/#instalacao-padrao-do-deck","title":"Instala\u00e7\u00e3o Padr\u00e3o do deck","text":"<p>Caso prefira instalar o deck diretamente no seu sistema, siga as instru\u00e7\u00f5es abaixo. Essa op\u00e7\u00e3o \u00e9 especialmente \u00fatil para quem deseja executar o deck sem utilizar containers.</p>"},{"location":"deck/instalacao/#baixar-e-extrair-o-deck","title":"Baixar e Extrair o deck","text":"<p>Baixe a vers\u00e3o mais recente do deck para o seu sistema. Exemplo para sistemas Linux com a vers\u00e3o 1.40.2:</p> <pre><code>curl -sL &lt;https://github.com/kong/deck/releases/download/v1.40.2/deck_1.40.2_linux_amd64.tar.gz&gt; -o deck.tar.gz\ntar -xf deck.tar.gz -C /tmp\n</code></pre>"},{"location":"deck/instalacao/#mover-o-binario-para-o-diretorio-de-sistema","title":"Mover o Bin\u00e1rio para o Diret\u00f3rio de Sistema","text":"<p>Ap\u00f3s extrair o arquivo, mova o bin\u00e1rio do deck para um diret\u00f3rio no PATH, como /usr/local/bin, para que ele possa ser executado globalmente:</p> <pre><code>sudo cp /tmp/deck /usr/local/bin/\n</code></pre>"},{"location":"deck/instalacao/#verificar-instalacao","title":"Verificar Instala\u00e7\u00e3o","text":"<p>Para confirmar que o deck foi instalado corretamente, verifique a vers\u00e3o:</p> <pre><code>deck version\n</code></pre> <p>Se o comando retornar a vers\u00e3o do deck, a instala\u00e7\u00e3o foi bem-sucedida.</p>"},{"location":"deck/instalacao/#atualizacoes","title":"Atualiza\u00e7\u00f5es","text":"<p>Para garantir que voc\u00ea est\u00e1 usando a vers\u00e3o mais recente do deck, consulte a documenta\u00e7\u00e3o oficial do deck para instru\u00e7\u00f5es de instala\u00e7\u00e3o e vers\u00f5es atualizadas.</p>"},{"location":"deck/principais-comandos/","title":"Principais comandos","text":"<p>A seguir est\u00e3o os principais comandos do decK utilizados para gerenciar configura\u00e7\u00f5es no Kong Gateway, muito \u00fateis para uma esteira e automa\u00e7\u00e3o de implanta\u00e7\u00e3o.</p> <p>Estes comandos permitem desde a valida\u00e7\u00e3o de arquivos de configura\u00e7\u00e3o at\u00e9 opera\u00e7\u00f5es avan\u00e7adas como sync, diff, e merge de arquivos.</p>"},{"location":"deck/principais-comandos/#ping","title":"Ping","text":"<p>Verifica a conectividade com o Kong Gateway.</p> <pre><code>deck gateway ping\n</code></pre> <p>Retorno:</p> <pre><code>Successfully connected to Kong!\nKong version:  3.7.1\n</code></pre>"},{"location":"deck/principais-comandos/#convert-spec","title":"Convert spec","text":"<p>Converte um arquivo Swagger/OpenAPI em um arquivo compat\u00edvel com o Kong Gateway.</p> <pre><code>deck file openapi2kong --spec &lt;input-file&gt; --output-file &lt;output.yaml&gt;\n</code></pre> <p>Exemplo:</p> <pre><code>deck file openapi2kong --spec swagger.json --output-file petstore.yaml    \n</code></pre>"},{"location":"deck/principais-comandos/#validate","title":"Validate","text":"<p>Valida um arquivo de configura\u00e7\u00e3o YAML para verificar erros de sintaxe ou conformidade.</p> <pre><code>deck gateway validate &lt;config-file.yaml&gt; # api administrativa\n\ndeck file validate &lt;config-file.yaml&gt; # api administrativa\n</code></pre> <p>Exemplo:</p> <pre><code>deck gateway validate petstore.yaml\n</code></pre> <p>O retorno de um erro na configura\u00e7\u00e3o como um par\u00e2metro com erro de sintaxe <code>h=st</code> ser\u00e1 similar ao exemplo a seguir:</p> <pre><code>Error: 1 errors occurred:\n        reading file petstore.yaml: validating file content: 1 errors occurred:\n        validation error: object=\"localhost\", err=services.0: Additional property h=st is not allowed\n</code></pre>"},{"location":"deck/principais-comandos/#diff","title":"Diff","text":"<p>Compara as configura\u00e7\u00f5es no Kong Gateway com o arquivo local e exibe as diferen\u00e7as.</p> <pre><code>deck gateway diff &lt;config-file.yaml&gt; \n</code></pre> <p>Exemplo:</p> <pre><code>deck gateway diff petstore.yaml\n</code></pre> <p>Retorno de uma dele\u00e7\u00e3o de rota:</p> <pre><code>deleting route swagger-petstore_addpet\nSummary:\n  Created: 0\n  Updated: 0\n  Deleted: 1\n</code></pre>"},{"location":"deck/principais-comandos/#dump","title":"Dump","text":"<p>Exporta toda a configura\u00e7\u00e3o atual do Kong Gateway para um arquivo YAML.</p> <pre><code>deck gateway dump --output-file &lt;output-file.yaml&gt;\n</code></pre> <p>Exemplo:</p> <pre><code>deck gateway dump --output-file kong.yaml\n</code></pre>"},{"location":"deck/principais-comandos/#file-lint","title":"File lint","text":"<p>Valida um arquivo de estado YAML contra um conjunto de regras personalizadas.</p> <pre><code>deck file lint -s &lt;state-file.yaml&gt; &lt;ruleset-file.yaml&gt;\n</code></pre> <p>Exemplo:</p> <pre><code>deck file lint -s kong.yaml ruleset.yaml\n</code></pre> <p>Retorno exemplo:</p> <pre><code>Linting Violations: 3\nFailures: 0\n\n[warn][1:1] OpenAPI host `schemes` must be present and non-empty array: `schemes`, is missing and is required\n[info][1:1] OpenAPI `host` must be present and a non-empty string: `host` must be set\n[warn][1:1] no servers defined for the specification\n</code></pre>"},{"location":"deck/principais-comandos/#deploy-sync","title":"Deploy (Sync)","text":"<p>Aplica as configura\u00e7\u00f5es de um arquivo local no Kong Gateway, sincronizando as altera\u00e7\u00f5es.</p> <pre><code>deck gateway sync &lt;deck-config.yaml&gt;\n</code></pre> <p>Exemplo:</p> <pre><code>deck gateway sync petstore.yaml\n</code></pre> <p>Ser\u00e1 exibido linha as configura\u00e7\u00f5es atualizadas(Routes, services, etc.).</p> <pre><code>Summary:\n  Created: 21\n  Updated: 0\n  Deleted: 20\n</code></pre>"},{"location":"deck/principais-comandos/#merge","title":"Merge","text":"<p>Combina dois ou mais arquivos de configura\u00e7\u00e3o em um \u00fanico arquivo de sa\u00edda.</p> <pre><code>deck file merge -o merged.yaml &lt;file1.yaml&gt; &lt;file2.yaml&gt;\n</code></pre> <p>Exemplo:</p> <pre><code>deck file merge -o merged.yaml kong.yaml petstore.yaml\n</code></pre>"},{"location":"deck/principais-comandos/#render","title":"Render","text":"<p>Renderiza arquivos YAML com vari\u00e1veis e templates, gerando um novo arquivo com as vari\u00e1veis resolvidas.</p> <pre><code>deck file render -o render.yaml &lt;file1.yaml&gt; &lt;file2.yaml&gt;\n</code></pre> <p>Exemplo:</p> <pre><code>deck file render -o render.yaml kong.yaml petstore.yaml\n</code></pre>"},{"location":"deck/principais-comandos/#convert-to-kic","title":"Convert to KIC","text":"<p>Converte um arquivo YAML do Kong Gateway para um formato compat\u00edvel com o Kubernetes Ingress Controller (KIC).</p> <pre><code>deck file kong2kic -s &lt;state-file.yaml&gt; -o &lt;kic.yaml&gt;\n</code></pre> <p>Exemplo:</p> <pre><code>deck file kong2kic -s kong.yaml -o kic.yaml\n</code></pre>"},{"location":"deck/principais-comandos/#reset","title":"Reset","text":"<p>Restaura o Kong Gateway removendo toda a configura\u00e7\u00e3o atual.</p> <pre><code>deck gateway reset\n</code></pre> <p>Aten\u00e7\u00e3o: Este comando deleta toda a configura\u00e7\u00e3o do Kong. \u00c9 altamente recomend\u00e1vel realizar um dump das configura\u00e7\u00f5es atuais antes de executar este comando.</p>"},{"location":"extens%C3%A3o-de-capacidades/sobre/","title":"Plugins personalizados","text":"<p>Kong Gateway \u00e9 um aplicativo Lua rodando em <code>Nginx</code> e distribu\u00eddo junto com OpenResty, que \u00e9 um pacote de m\u00f3dulos que estende o m\u00f3dulo <code>lua-nginx</code>.</p> <p>Isto estabelece as bases para uma arquitetura modular, onde os plugins podem ser habilitados e executados em tempo de execu\u00e7\u00e3o.</p> <p>Basicamente, o Kong Gateway implementa abstra\u00e7\u00e3o de banco de dados, roteamento e gerenciamento de plugins.</p> <p>Os plug-ins podem residir em bases de c\u00f3digo separadas e ser injetados em qualquer lugar do ciclo de vida da solicita\u00e7\u00e3o, tudo com algumas linhas de c\u00f3digo.</p> <p>O Kong fornece muitos plug-ins nativamente para se usar em suas implanta\u00e7\u00f5es, estando dispon\u00edveis por tier <code>Free</code> e <code>Enterprise</code>, mas h\u00e1 uma s\u00e9rie de plugins disponibilizados pela comunidade.</p> <p>Mais informa\u00e7\u00f5es sobre o desenvolvimento de plugins poder\u00e1 ser encontrado nesta se\u00e7\u00e3o.</p>"},{"location":"implanta%C3%A7%C3%A3o/docker-compose/instalacao/","title":"Guia de instala\u00e7\u00e3o","text":""},{"location":"implanta%C3%A7%C3%A3o/docker-compose/instalacao/#visao-geral","title":"Vis\u00e3o Geral","text":"<p>Este guia fornece instru\u00e7\u00f5es para instalar o Kong Gateway usando o Docker Compose para a topologia <code>standalone</code>.</p> <p>O Kong \u00e9 uma plataforma extens\u00edvel para gerenciamento de APIs que permite controle, seguran\u00e7a e observabilidade de servi\u00e7os e microsservi\u00e7os.</p>"},{"location":"implanta%C3%A7%C3%A3o/docker-compose/instalacao/#pre-requisitos","title":"Pr\u00e9-requisitos","text":"<p>Antes de come\u00e7ar, certifique-se de que voc\u00ea tenha os seguintes componentes instalados em seu ambiente:</p> <ul> <li>Docker (v19.03 ou superior)</li> <li>Docker Compose (v1.27.0 ou superior)</li> </ul>"},{"location":"implanta%C3%A7%C3%A3o/docker-compose/instalacao/#instrucoes-para-instalacao-do-docker-e-docker-compose","title":"Instru\u00e7\u00f5es para Instala\u00e7\u00e3o do Docker e Docker Compose","text":"<p>Caso voc\u00ea n\u00e3o tenha o Docker instalado, siga as instru\u00e7\u00f5es oficiais para instal\u00e1-lo:</p> <ul> <li>Docker: Instru\u00e7\u00f5es de instala\u00e7\u00e3o</li> <li>Docker Compose: Instru\u00e7\u00f5es de instala\u00e7\u00e3o</li> </ul>"},{"location":"implanta%C3%A7%C3%A3o/docker-compose/instalacao/#procedimento-de-instalacao","title":"Procedimento de Instala\u00e7\u00e3o","text":""},{"location":"implanta%C3%A7%C3%A3o/docker-compose/instalacao/#configuracao-inicial","title":"Configura\u00e7\u00e3o Inicial","text":"<p>Configure o seu arquivo <code>docker-compose.yaml</code> e <code>Makefile</code> conforme reposit\u00f3rio oficial.</p>"},{"location":"implanta%C3%A7%C3%A3o/docker-compose/instalacao/#implantacao-db-less-sem-banco-de-dados","title":"Implanta\u00e7\u00e3o DB-less (Sem banco de dados)","text":"<p>Execute o seguinte comando para iniciar uma vers\u00e3o do Kong que n\u00e3o utiliza banco de dados:</p> <pre><code>docker-compose up -d\n</code></pre> <p>Observa\u00e7\u00e3o: Esta implanta\u00e7\u00e3o \u00e9 limitada em compara\u00e7\u00e3o com a vers\u00e3o que utiliza um banco de dados, devido \u00e0 falta de suporte para alguns plugins do Kong.</p>"},{"location":"implanta%C3%A7%C3%A3o/docker-compose/instalacao/#implantacao-com-postgresql","title":"Implanta\u00e7\u00e3o com PostgreSQL","text":"<p>Diferente do modelo acima, esta configura\u00e7\u00e3o faz o uso do banco de dados.</p> <p>No mesmo diret\u00f3rio onde voc\u00ea criou o arquivo <code>docker-compose.yml</code>, execute o seguinte comando para subir os servi\u00e7os:</p> <pre><code>make kong-postgres\n</code></pre> <p>Este comando ir\u00e1:</p> <ul> <li>Subir um banco de dados PostgreSQL;</li> <li>Executar as migra\u00e7\u00f5es do banco de dados necess\u00e1rias para o Kong;</li> <li>Iniciar o Kong Gateway.</li> </ul>"},{"location":"implanta%C3%A7%C3%A3o/docker-compose/instalacao/#verificacao-do-status-do-kong","title":"Verifica\u00e7\u00e3o do status do Kong","text":"<p>Ap\u00f3s a execu\u00e7\u00e3o dos containers, voc\u00ea pode verificar se o Kong est\u00e1 funcionando corretamente acessando o endpoint administrativo:</p> <pre><code>curl -i &lt;http://localhost:8001&gt;\n</code></pre> <p>Se o Kong estiver funcionando corretamente, voc\u00ea dever\u00e1 ver uma resposta com o status 200 OK.</p>"},{"location":"implanta%C3%A7%C3%A3o/docker-compose/instalacao/#testando-o-proxy-do-kong","title":"Testando o Proxy do Kong","text":"<p>Agora que o Kong est\u00e1 instalado e funcionando, voc\u00ea pode testar o proxy do Kong. Use o seguinte comando para verificar:</p> <pre><code>curl -i &lt;http://localhost:8000&gt;\n</code></pre> <p>Se configurado corretamente, voc\u00ea ver\u00e1 a resposta padr\u00e3o do Kong indicando que nenhum servi\u00e7o foi configurado no gateway ainda.</p>"},{"location":"implanta%C3%A7%C3%A3o/docker-compose/instalacao/#parando-os-containers","title":"Parando os Containers","text":"<p>Para parar os containers, execute no diret\u00f3rio do <code>docker-compose.yaml</code>:</p> <pre><code>docker-compose down\n</code></pre>"},{"location":"implanta%C3%A7%C3%A3o/kubernetes/control-plane/","title":"Control plane","text":"<p>O Control Plane (Plano de Controle) \u00e9 uma das partes fundamentais da arquitetura do Kong Gateway, especialmente em ambientes que utilizam o modelo de implanta\u00e7\u00e3o h\u00edbrido ou distribu\u00eddo. Ele desempenha um papel crucial no gerenciamento centralizado de configura\u00e7\u00f5es e na coordena\u00e7\u00e3o de outros componentes do sistema.</p> <p>O Control Plane \u00e9 respons\u00e1vel por:</p> <ul> <li> <p>Gerenciar Configura\u00e7\u00f5es: Centraliza a configura\u00e7\u00e3o de servi\u00e7os, rotas, plugins e certificados SSL.</p> </li> <li> <p>Distribuir Configura\u00e7\u00f5es: Propaga essas configura\u00e7\u00f5es para os Data Planes (Planos de Dados), que s\u00e3o os respons\u00e1veis por processar o tr\u00e1fego de API em tempo de execu\u00e7\u00e3o.</p> </li> <li> <p>Garantir Consist\u00eancia: Mant\u00e9m a consist\u00eancia das configura\u00e7\u00f5es em m\u00faltiplos Data Planes, mesmo em ambientes geograficamente distribu\u00eddos.</p> </li> </ul>"},{"location":"implanta%C3%A7%C3%A3o/kubernetes/control-plane/#como-funciona","title":"Como Funciona","text":"<p>O Control Plane se comunica com os Data Planes usando o protocolo mTLS (Mutual TLS) para garantir seguran\u00e7a. A comunica\u00e7\u00e3o ocorre de maneira unidirecional:</p> <ol> <li>O administrador faz altera\u00e7\u00f5es de configura\u00e7\u00e3o no Control Plane.</li> <li>O Control Plane distribui essas configura\u00e7\u00f5es para os Data Planes.</li> <li>Os Data Planes aplicam as configura\u00e7\u00f5es para gerenciar o tr\u00e1fego de API.</li> </ol> <p>Dessa forma, o Control Plane atua como o c\u00e9rebro do sistema, enquanto os Data Planes executam as instru\u00e7\u00f5es recebidas.</p>"},{"location":"implanta%C3%A7%C3%A3o/kubernetes/control-plane/#componentes-associados","title":"Componentes Associados","text":""},{"location":"implanta%C3%A7%C3%A3o/kubernetes/control-plane/#banco-de-dados","title":"Banco de Dados","text":"<p>O Control Plane utiliza um banco de dados (como PostgreSQL) para armazenar todas as configura\u00e7\u00f5es relacionadas a servi\u00e7os, rotas e plugins.</p> <p>No modelo de \"Traditional Deployment\", o Control Plane e o Data Plane compartilham acesso ao mesmo banco de dados.</p>"},{"location":"implanta%C3%A7%C3%A3o/kubernetes/control-plane/#kong-admin-api","title":"Kong Admin API","text":"<p>A interface de gerenciamento usada para configurar o Control Plane.</p> <p>Pode ser acessada diretamente para criar, ler, atualizar e excluir configura\u00e7\u00f5es.</p>"},{"location":"implanta%C3%A7%C3%A3o/kubernetes/control-plane/#certificados-de-seguranca","title":"Certificados de Seguran\u00e7a","text":"<p>O Control Plane usa certificados SSL/TLS para autenticar e proteger a comunica\u00e7\u00e3o com os Data Planes.</p>"},{"location":"implanta%C3%A7%C3%A3o/kubernetes/control-plane/#modelos-de-implantacao","title":"Modelos de Implanta\u00e7\u00e3o","text":""},{"location":"implanta%C3%A7%C3%A3o/kubernetes/control-plane/#traditional-deployment","title":"Traditional Deployment","text":"<p>Tanto o Control Plane quanto o Data Plane compartilham o mesmo banco de dados.</p> <p>Simples de configurar, mas menos escal\u00e1vel em grandes ambientes.</p>"},{"location":"implanta%C3%A7%C3%A3o/kubernetes/control-plane/#hybrid-deployment","title":"Hybrid Deployment","text":"<p>O Control Plane e os Data Planes s\u00e3o separados. O Control Plane distribui configura\u00e7\u00f5es aos Data Planes por meio de um canal seguro.</p> <p>Ideal para arquiteturas distribu\u00eddas e de alta disponibilidade.</p>"},{"location":"implanta%C3%A7%C3%A3o/kubernetes/control-plane/#beneficios-do-control-plane","title":"Benef\u00edcios do Control Plane","text":"<ul> <li> <p>Centraliza\u00e7\u00e3o: Todas as configura\u00e7\u00f5es s\u00e3o gerenciadas de maneira centralizada, facilitando o controle e a auditoria.</p> </li> <li> <p>Escalabilidade: Permite escalar os Data Planes independentemente do Control Plane, atendendo a diferentes volumes de tr\u00e1fego.</p> </li> <li> <p>Seguran\u00e7a: A comunica\u00e7\u00e3o entre Control Plane e Data Planes \u00e9 protegida por mTLS, garantindo integridade e confidencialidade.</p> </li> <li> <p>Flexibilidade: Oferece suporte a v\u00e1rios modelos de implanta\u00e7\u00e3o, permitindo que as empresas escolham a abordagem mais adequada \u00e0s suas necessidades.</p> </li> </ul>"},{"location":"implanta%C3%A7%C3%A3o/kubernetes/control-plane/#consideracoes-importantes","title":"Considera\u00e7\u00f5es Importantes","text":"<ul> <li> <p>Resili\u00eancia: O Control Plane n\u00e3o precisa estar dispon\u00edvel 100% do tempo para que os Data Planes processem o tr\u00e1fego. As configura\u00e7\u00f5es j\u00e1 propagadas permanecem ativas no Data Plane, mesmo que o Control Plane fique offline temporariamente.</p> </li> <li> <p>Lat\u00eancia: Altera\u00e7\u00f5es de configura\u00e7\u00e3o podem levar alguns segundos para serem propagadas aos Data Planes em ambientes distribu\u00eddos.</p> </li> <li> <p>Manuten\u00e7\u00e3o: Atualiza\u00e7\u00f5es e mudan\u00e7as no Control Plane devem ser planejadas cuidadosamente para evitar interrup\u00e7\u00f5es no fluxo de trabalho.</p> </li> </ul>"},{"location":"implanta%C3%A7%C3%A3o/kubernetes/control-plane/#cenarios-de-uso","title":"Cen\u00e1rios de Uso","text":"<ul> <li> <p>Ambientes Multi-Cloud: Onde Data Planes est\u00e3o localizados em diferentes regi\u00f5es geogr\u00e1ficas ou provedores de nuvem.</p> </li> <li> <p>Seguran\u00e7a e Conformidade: Configura\u00e7\u00f5es centralizadas facilitam a aplica\u00e7\u00e3o de pol\u00edticas de seguran\u00e7a e a conformidade com regulamenta\u00e7\u00f5es como, LGPD, GDPR ou HIPAA.</p> </li> <li> <p>Alta Disponibilidade: Ambientes que requerem failover autom\u00e1tico e continuidade do tr\u00e1fego de API.</p> </li> </ul>"},{"location":"implanta%C3%A7%C3%A3o/kubernetes/data-plane/","title":"Data plane","text":"<p>O Data Plane (Plano de Dados) \u00e9 a parte do Kong Gateway respons\u00e1vel por processar o tr\u00e1fego de API em tempo de execu\u00e7\u00e3o. Ele atua como a camada operacional da arquitetura, implementando as pol\u00edticas configuradas pelo Control Plane e garantindo que as solicita\u00e7\u00f5es sejam gerenciadas de maneira eficiente e segura.</p> <p>O Data Plane \u00e9 projetado para:</p> <ul> <li> <p>Gerenciar o Tr\u00e1fego de API: Processar solicita\u00e7\u00f5es e respostas entre clientes e backends.</p> </li> <li> <p>Aplicar Pol\u00edticas: Implementar pol\u00edticas configuradas, como autentica\u00e7\u00e3o, autoriza\u00e7\u00e3o, limita\u00e7\u00e3o de taxa, cache e transforma\u00e7\u00e3o de solicita\u00e7\u00f5es.</p> </li> <li> <p>Registrar Logs e M\u00e9tricas: Coletar dados operacionais sobre o tr\u00e1fego de API, que podem ser enviados para ferramentas de monitoramento como Grafana, Prometheus ou ELK Stack.</p> </li> </ul>"},{"location":"implanta%C3%A7%C3%A3o/kubernetes/data-plane/#como-funciona","title":"Como Funciona","text":"<p>O Data Plane \u00e9 configurado para operar com base nas instru\u00e7\u00f5es recebidas do Control Plane. Ele n\u00e3o gerencia configura\u00e7\u00f5es diretamente, mas aplica as regras e pol\u00edticas definidas. O fluxo t\u00edpico de opera\u00e7\u00e3o do Data Plane \u00e9:</p> <ol> <li>Receber solicita\u00e7\u00f5es de clientes (por exemplo, chamadas de API).</li> <li>Validar as solicita\u00e7\u00f5es com base nas pol\u00edticas configuradas (como autentica\u00e7\u00e3o).</li> <li>Direcionar as solicita\u00e7\u00f5es para os servi\u00e7os backend correspondentes.</li> <li>Transformar e enviar respostas de volta para os clientes, se necess\u00e1rio.</li> </ol>"},{"location":"implanta%C3%A7%C3%A3o/kubernetes/data-plane/#componentes-associados","title":"Componentes Associados","text":""},{"location":"implanta%C3%A7%C3%A3o/kubernetes/data-plane/#proxy","title":"Proxy","text":"<p>Principal componente do Data Plane, respons\u00e1vel pelo roteamento de solicita\u00e7\u00f5es e pela aplica\u00e7\u00e3o de pol\u00edticas configuradas.</p>"},{"location":"implanta%C3%A7%C3%A3o/kubernetes/data-plane/#plugins","title":"Plugins","text":"<p>Executam funcionalidades adicionais, como autentica\u00e7\u00e3o, an\u00e1lise de tr\u00e1fego e limita\u00e7\u00e3o de taxa, diretamente no Data Plane.</p>"},{"location":"implanta%C3%A7%C3%A3o/kubernetes/data-plane/#cache","title":"Cache","text":"<p>O Data Plane pode utilizar cache interno para melhorar o desempenho, armazenando temporariamente respostas ou verifica\u00e7\u00f5es de autentica\u00e7\u00e3o.</p>"},{"location":"implanta%C3%A7%C3%A3o/kubernetes/data-plane/#certificados-ssl","title":"Certificados SSL","text":"<p>Permitem conex\u00f5es seguras entre clientes e o Data Plane, bem como entre o Data Plane e backends.</p>"},{"location":"implanta%C3%A7%C3%A3o/kubernetes/data-plane/#modelos-de-implantacao","title":"Modelos de Implanta\u00e7\u00e3o","text":""},{"location":"implanta%C3%A7%C3%A3o/kubernetes/data-plane/#traditional-deployment","title":"Traditional Deployment","text":"<ul> <li> <p>O Data Plane acessa diretamente o banco de dados compartilhado com o Control Plane.</p> </li> <li> <p>Configura\u00e7\u00f5es s\u00e3o recuperadas diretamente do banco, o que simplifica a opera\u00e7\u00e3o, mas limita a escalabilidade.</p> </li> </ul>"},{"location":"implanta%C3%A7%C3%A3o/kubernetes/data-plane/#hybrid-deployment","title":"Hybrid Deployment","text":"<ul> <li> <p>O Data Plane n\u00e3o acessa o banco de dados diretamente.</p> </li> <li> <p>Configura\u00e7\u00f5es s\u00e3o propagadas do Control Plane para o Data Plane usando mTLS.</p> </li> <li> <p>Mais adequado para arquiteturas distribu\u00eddas e de alta disponibilidade.</p> </li> </ul>"},{"location":"implanta%C3%A7%C3%A3o/kubernetes/data-plane/#beneficios-do-data-plane","title":"Benef\u00edcios do Data Plane","text":"<ul> <li> <p>Desempenho: O processamento local de pol\u00edticas e plugins garante baixa lat\u00eancia.</p> </li> <li> <p>Escalabilidade: V\u00e1rios Data Planes podem ser implantados em paralelo para atender a grandes volumes de tr\u00e1fego.</p> </li> <li> <p>Isolamento: A separa\u00e7\u00e3o entre Control Plane e Data Plane melhora a seguran\u00e7a e a estabilidade operacional.</p> </li> <li> <p>Resili\u00eancia: Continua operando com as configura\u00e7\u00f5es propagadas mesmo que o Control Plane fique temporariamente indispon\u00edvel.</p> </li> </ul>"},{"location":"implanta%C3%A7%C3%A3o/kubernetes/data-plane/#consideracoes-importantes","title":"Considera\u00e7\u00f5es Importantes","text":"<ul> <li> <p>Sincroniza\u00e7\u00e3o: \u00c9 fundamental garantir que o Data Plane receba as configura\u00e7\u00f5es mais recentes do Control Plane.</p> </li> <li> <p>Manuten\u00e7\u00e3o: Atualiza\u00e7\u00f5es no Data Plane devem ser cuidadosamente planejadas para evitar interrup\u00e7\u00f5es no tr\u00e1fego de API.</p> </li> <li> <p>Monitoramento: O Data Plane deve ser integrado a sistemas de monitoramento para rastrear desempenho, erros e uso.</p> </li> </ul>"},{"location":"implanta%C3%A7%C3%A3o/kubernetes/data-plane/#cenarios-de-uso","title":"Cen\u00e1rios de Uso","text":"<ul> <li> <p>Edge Gateways: Onde o Data Plane \u00e9 implantado pr\u00f3ximo aos clientes para reduzir a lat\u00eancia.</p> </li> <li> <p>Regi\u00f5es Distribu\u00eddas: Em ambientes multi-cloud ou multi-regi\u00e3o, cada regi\u00e3o pode ter um Data Plane dedicado para atender localmente \u00e0s solicita\u00e7\u00f5es.</p> </li> <li> <p>APIs de Alta Performance: Em que o tr\u00e1fego precisa ser roteado rapidamente e pol\u00edticas complexas devem ser aplicadas em tempo real.</p> </li> </ul>"},{"location":"implanta%C3%A7%C3%A3o/kubernetes/instalacao/","title":"Guia de instala\u00e7\u00e3o - Kubernetes","text":""},{"location":"implanta%C3%A7%C3%A3o/kubernetes/topologias/","title":"Topologias","text":""},{"location":"implanta%C3%A7%C3%A3o/kubernetes/topologias/#visao-geral","title":"Vis\u00e3o Geral","text":"<p>O Kong Gateway oferece diferentes topologias de implanta\u00e7\u00e3o para atender a diversas necessidades de escalabilidade, performance e gerenciamento.</p> <p>Neste documento, exploramos as topologias Standalone e Hybrid, destacando suas caracter\u00edsticas, casos de uso e principais diferen\u00e7as.</p>"},{"location":"implanta%C3%A7%C3%A3o/kubernetes/topologias/#topologias-de-implantacao","title":"Topologias de Implanta\u00e7\u00e3o","text":""},{"location":"implanta%C3%A7%C3%A3o/kubernetes/topologias/#standalone","title":"Standalone","text":"<p>A topologia Standalone \u00e9 a configura\u00e7\u00e3o mais b\u00e1sica do Kong, ideal para ambientes simples ou de desenvolvimento, onde n\u00e3o h\u00e1 necessidade de separar o gerenciamento do tr\u00e1fego e a execu\u00e7\u00e3o de configura\u00e7\u00f5es.</p>"},{"location":"implanta%C3%A7%C3%A3o/kubernetes/topologias/#caracteristicas","title":"Caracter\u00edsticas","text":"<ul> <li>A execu\u00e7\u00e3o ocorre em um \u00fanico n\u00f3, sem necessidade de separa\u00e7\u00e3o de control plane e data plane.</li> <li>Simplificada, com todos os servi\u00e7os e plugins em um \u00fanico processo.</li> <li>Ideal para ambientes de teste ou desenvolvimento.</li> </ul>"},{"location":"implanta%C3%A7%C3%A3o/kubernetes/topologias/#casos-de-uso","title":"Casos de Uso","text":"<ul> <li>Ambientes de desenvolvimento e testes locais.</li> <li>Pequenas aplica\u00e7\u00f5es ou quando a performance e alta disponibilidade n\u00e3o s\u00e3o priorit\u00e1rias.</li> </ul>"},{"location":"implanta%C3%A7%C3%A3o/kubernetes/topologias/#vantagens","title":"Vantagens","text":"<ul> <li>Configura\u00e7\u00e3o simplificada e f\u00e1cil de gerenciar.</li> <li>Menor consumo de recursos.</li> </ul>"},{"location":"implanta%C3%A7%C3%A3o/kubernetes/topologias/#desvantagens","title":"Desvantagens","text":"<ul> <li>Limitada para ambientes de produ\u00e7\u00e3o complexos.</li> <li>Sem separa\u00e7\u00e3o de control plane e data plane, o que limita a escalabilidade e o gerenciamento centralizado.</li> </ul>"},{"location":"implanta%C3%A7%C3%A3o/kubernetes/topologias/#hybrid","title":"Hybrid","text":"<p>A topologia Hybrid \u00e9 projetada para ambientes de produ\u00e7\u00e3o mais complexos, permitindo uma configura\u00e7\u00e3o distribu\u00edda e escal\u00e1vel.</p> <p>Nesta configura\u00e7\u00e3o, h\u00e1 uma clara separa\u00e7\u00e3o entre o Control Plane (CP) e o Data Plane (DP), permitindo o gerenciamento centralizado das configura\u00e7\u00f5es.</p>"},{"location":"implanta%C3%A7%C3%A3o/kubernetes/topologias/#caracteristicas_1","title":"Caracter\u00edsticas","text":"<ul> <li>Control Plane (CP): Respons\u00e1vel pela configura\u00e7\u00e3o e gerenciamento centralizado. As altera\u00e7\u00f5es de configura\u00e7\u00e3o do gateway s\u00e3o propagadas para os Data Planes.</li> <li>Data Plane (DP): Respons\u00e1vel pelo processamento das requisi\u00e7\u00f5es dos clientes. Os DPs consomem a configura\u00e7\u00e3o enviada pelo CP, mas n\u00e3o possuem informa\u00e7\u00f5es de configura\u00e7\u00e3o diretamente.</li> <li>Comunica\u00e7\u00e3o entre CP e DP ocorre atrav\u00e9s do mTLS para garantir seguran\u00e7a e confiabilidade.</li> </ul>"},{"location":"implanta%C3%A7%C3%A3o/kubernetes/topologias/#casos-de-uso_1","title":"Casos de Uso","text":"<ul> <li>Ambientes de produ\u00e7\u00e3o com alta demanda.</li> <li>Necessidade de escalabilidade horizontal, permitindo que m\u00faltiplos Data Planes processem o tr\u00e1fego simultaneamente.</li> <li>Requer um ambiente de gerenciamento centralizado.</li> </ul>"},{"location":"implanta%C3%A7%C3%A3o/kubernetes/topologias/#vantagens_1","title":"Vantagens","text":"<ul> <li>Alta escalabilidade e capacidade de lidar com grandes volumes de tr\u00e1fego.</li> <li>Centraliza\u00e7\u00e3o no Control Plane facilita o gerenciamento e a aplica\u00e7\u00e3o de pol\u00edticas de seguran\u00e7a.</li> <li>Isolamento das requisi\u00e7\u00f5es (DP) das configura\u00e7\u00f5es (CP), garantindo maior performance.</li> </ul>"},{"location":"implanta%C3%A7%C3%A3o/kubernetes/topologias/#desvantagens_1","title":"Desvantagens","text":"<ul> <li>Configura\u00e7\u00e3o mais complexa, exigindo maior conhecimento para implementa\u00e7\u00e3o e gerenciamento.</li> <li>Consome mais recursos, pois exige uma infraestrutura dedicada para CP e DP.</li> <li>Requer configura\u00e7\u00e3o de mTLS para comunica\u00e7\u00e3o segura entre CP e DP.</li> </ul>"},{"location":"implanta%C3%A7%C3%A3o/kubernetes/topologias/#comparacao-entre-standalone-e-hybrid","title":"Compara\u00e7\u00e3o entre Standalone e Hybrid","text":"Aspecto Standalone Hybrid Separa\u00e7\u00e3o de Fun\u00e7\u00f5es N\u00e3o h\u00e1 separa\u00e7\u00e3o entre CP e DP CP e DP separados Complexidade de Configura\u00e7\u00e3o Simples Moderada a alta Escalabilidade Limitada Alta Casos de Uso Desenvolvimento e testes locais Produ\u00e7\u00e3o de larga escala Consumo de Recursos Baixo Moderado a alto Seguran\u00e7a de Comunica\u00e7\u00e3o N\u00e3o necess\u00e1rio Necessita mTLS entre CP e DP"},{"location":"mapa-de-capacidades/acl/","title":"ACL","text":"<p>A ACL (Access Control List) no Kong Gateway \u00e9 uma funcionalidade que permite controlar o acesso aos servi\u00e7os e recursos de uma API, baseando-se em listas de controle de acesso.</p> <p>Estas listas definem quais consumidores podem ou n\u00e3o acessar determinados recursos, garantindo uma camada adicional de seguran\u00e7a e controle sobre a exposi\u00e7\u00e3o dos servi\u00e7os.</p> <p>A ACL \u00e9 crucial para ambientes onde diferentes n\u00edveis de acesso precisam ser gerenciados com precis\u00e3o, como em empresas que oferecem servi\u00e7os para m\u00faltiplos clientes ou parceiros e necessitam segregar esses acessos de forma segura e eficiente.</p>"},{"location":"mapa-de-capacidades/acl/#por-que-usar-a-acl","title":"Por que usar a ACL?","text":""},{"location":"mapa-de-capacidades/acl/#cenario-infeliz","title":"Cen\u00e1rio infeliz","text":"<p>Imagine uma API que se encontra sem a implementa\u00e7\u00e3o de uma ACL.</p> <p>Neste cen\u00e1rio, qualquer cliente autenticado pode acessar os servi\u00e7os dispon\u00edveis na API, incluindo funcionalidades cr\u00edticas que sejam dispon\u00edveis a apenas um grupo resumido.</p>"},{"location":"mapa-de-capacidades/acl/#cenario-feliz","title":"Cen\u00e1rio feliz","text":"<p>Cada cliente tem acesso restrito apenas aos servi\u00e7os que lhe s\u00e3o permitidos, de acordo com as pol\u00edticas definidas na lista de controle de acesso.</p> <p>Um parceiro, por exemplo, pode ter acesso somente a funcionalidades espec\u00edficas, como a visualiza\u00e7\u00e3o de relat\u00f3rios de uso e a gest\u00e3o de seus pr\u00f3prios usu\u00e1rios, sem poder modificar dados de outros parceiros ou acessar informa\u00e7\u00f5es sens\u00edveis.</p> <p>Em um cen\u00e1rio feliz, mesmo que um parceiro mal-intencionado tente explorar a API, ele encontrar\u00e1 um impedimento para o acesso a funcionalidades n\u00e3o autorizadas, garantindo a seguran\u00e7a e a integridade dos dados e servi\u00e7os da empresa de telecomunica\u00e7\u00f5es.</p>"},{"location":"mapa-de-capacidades/acl/#como-implementar-um-acl","title":"Como implementar um ACL?","text":"<p>Restringir ou permitir o acesso a um servi\u00e7o ou a uma rota adicionando consumidores a listas usando grupos de ACL arbitr\u00e1rios requer que um plugin de autentica\u00e7\u00e3o (como Basic Authentication, Key Authentication, OAuth 2.0 ou OpenID Connect) j\u00e1 tenha sido habilitado previamente.</p>"},{"location":"mapa-de-capacidades/acl/#via-api-administrativa","title":"Via API administrativa","text":"<p>Esta se\u00e7\u00e3o ir\u00e1 apresentar como o plugin de ACL atua em conjunto com um modelo de autentica\u00e7\u00e3o. Considere um plugin do tipo <code>key-auth</code> j\u00e1 configurado.</p>"},{"location":"mapa-de-capacidades/acl/#criacao-de-consumer","title":"Cria\u00e7\u00e3o de consumer","text":"<p>Criando um consumidor:</p> <pre><code>curl -i -X POST &lt;http://localhost:8001/consumers/&gt; \\\n    --data \"username=&lt;consumer-name&gt;\"\n</code></pre> <p>Crie consumers dos tipos <code>dev</code>, <code>admin</code>.</p>"},{"location":"mapa-de-capacidades/acl/#criacao-de-group","title":"Cria\u00e7\u00e3o de group","text":"<p>Como criar um novo grupo:</p> <pre><code>curl -i -X POST http://localhost:8001/consumers/&lt;consumer-name&gt;/acls \\\n  --data \"group=&lt;group-name1, group-name2&gt;\"\n</code></pre> <p>Crie os grupos: <code>dev</code> e <code>admin</code>.</p>"},{"location":"mapa-de-capacidades/acl/#adicao-do-plugin-acl-a-uma-rota","title":"Adi\u00e7\u00e3o do Plugin ACL a uma rota","text":"<pre><code>curl --location 'http://localhost:8001/routes/&lt;route-name&gt;/plugins' \\\n--header 'accept: application/json' \\\n--header 'Content-Type: application/json' \\\n--data '{\n    \"name\": \"acl\",\n    \"instance_name\": \"&lt;instance-name&gt;\",\n    \"config\": {\n        \"allow\": [\n            \"group1\", \n            \"group2\"\n        ],\n        \"hide_groups_header\": true\n    }\n}'\n</code></pre> <p>Exemplo:</p> <pre><code>curl --location 'http://localhost:8001/routes/my-acl/plugins' \\\n--header 'accept: application/json' \\\n--header 'Content-Type: application/json' \\\n--data '{\n    \"name\": \"acl\",\n    \"instance_name\": \"plugin-acl-v1\",\n    \"config\": {\n        \"allow\": [\n            \"dev\", \n            \"admin\"\n        ],\n        \"hide_groups_header\": true\n    }\n}'\n</code></pre> <p>Intencionalmente para a nossa explica\u00e7\u00e3o foi permitido apenas o grupo <code>group-sales</code> para a nossa API. Desta forma veremos que somente os clientes autenticados (sales e admin) poder\u00e3o consumir este recurso.</p>"},{"location":"mapa-de-capacidades/acl/#consumindo-a-api","title":"Consumindo a API","text":"<p>Considere nossa API anterior para a rota: <code>http://localhost:8001/routes/my-acl</code>. Consuma a API com a API Key configurada no plugin <code>Key Authentication</code>.</p> <pre><code>curl --location 'http://localhost:8000/my-acl' \\\n--header 'apikey: &lt;api-key&gt;'\n</code></pre> <p>Voc\u00ea ver\u00e1 que as API keys de <code>dev</code> e <code>admin</code> poder\u00e3o consumir normalmente o recurso, enquanto outros ter\u00e3o um retorno similar a:</p> <pre><code>{\n    \"message\": \"You cannot consume this service\",\n    \"request_id\": \"769d897ecdca8a1e8e96c26d5a959866\"\n}\n</code></pre>"},{"location":"mapa-de-capacidades/acl/#via-deck","title":"Via decK","text":"<p>Adicione as seguintes configura\u00e7\u00f5es em sua config decK.</p> <pre><code>consumers:\n  - username: dev\n  - username: admin\n\nacls:\n  - consumer: dev\n    group: dev\n  - consumer: admin\n    group: admin\n\nplugins:\n  - name: acl\n    instance_name: plugin-acl-v1\n    route: my-acl\n    config:\n      allow:\n        - dev\n        - admin\n      hide_groups_header: true\n\n  - name: key-auth\n    route: my-acl\n    config: {}\n</code></pre> <p>Para implantar as configura\u00e7\u00f5es:</p> <pre><code>deck gateway sync &lt;deck-config.yaml&gt;\n</code></pre>"},{"location":"mapa-de-capacidades/acl/#via-kubernetes-ingress","title":"Via Kubernetes ingress","text":"<p>Crie um arquivo de configura\u00e7\u00e3o <code>acl.yaml</code>:</p> <pre><code>apiVersion: configuration.konghq.com/v1\nkind: KongPlugin\nmetadata:\n  name: acl-example\nplugin: acl\nconfig:\n  allow:\n\n- group1\n- group2\n  hide_groups_header: true\n</code></pre> <p>Aplique as configura\u00e7\u00f5es:</p> <pre><code>kubectl apply -f acl.yaml\n</code></pre> <p>Anote o ingress com as configura\u00e7\u00f5es:</p> <pre><code>kubectl annotate ingress INGRESS_NAME konghq.com/plugins=acl-example\n</code></pre>"},{"location":"mapa-de-capacidades/acl/#via-kong-manager","title":"Via Kong Manager","text":"<p>Exemplo de configura\u00e7\u00e3o do plugin ACL para uma rota previamente criada e autentica\u00e7\u00e3o por Key Auth:</p> <p></p> <p>Observa\u00e7\u00e3o: este exemplo apresenta o cen\u00e1rio de captura do ACL. Para realizar a configura\u00e7\u00e3o correta, basta adicionar ao plugin o grupo criado para o consumer.</p> <p>Mais detalhes na documenta\u00e7\u00e3o oficial.</p>"},{"location":"mapa-de-capacidades/caching/","title":"Caching","text":"<p>A funcionalidade de caching do Kong permite armazenar temporariamente respostas de solicita\u00e7\u00f5es de API, reduzindo a necessidade de recalcular ou buscar dados id\u00eanticos repetidamente.</p> <p>Isso n\u00e3o s\u00f3 melhora a performance da API, mas tamb\u00e9m diminui a carga nos servi\u00e7os backend, promovendo efici\u00eancia operacional e redu\u00e7\u00e3o de custos.</p> <p>O caching \u00e9 configur\u00e1vel, permitindo definir crit\u00e9rios como dura\u00e7\u00e3o do cache e condi\u00e7\u00f5es de invalida\u00e7\u00e3o, garantindo que os dados sejam atuais e relevantes.</p>"},{"location":"mapa-de-capacidades/caching/#quando-implementar-o-caching-do-kong","title":"Quando implementar o Caching do Kong?","text":"<p>A implementa\u00e7\u00e3o do caching no Kong \u00e9 especialmente \u00fatil em cen\u00e1rios de alto tr\u00e1fego, onde a repeti\u00e7\u00e3o de solicita\u00e7\u00f5es a servi\u00e7os backend pode causar lat\u00eancia e sobrecarga de recursos.</p> <p>Momentos de pico de acesso, como promo\u00e7\u00f5es sazonais ou recursos que possuem pouca varia\u00e7\u00e3o do seu retorno s\u00e3o cen\u00e1rios interessantes para seu uso.</p> <p>A ado\u00e7\u00e3o antecipada do caching durante a fase de design de uma arquitetura pode evitar problemas de performance \u00e0 medida que a aplica\u00e7\u00e3o escala.</p>"},{"location":"mapa-de-capacidades/caching/#por-que-utilizar-o-caching","title":"Por que utilizar o Caching?","text":""},{"location":"mapa-de-capacidades/caching/#cenario-infeliz","title":"Cen\u00e1rio infeliz","text":"<p>Um servi\u00e7o n\u00e3o utilizava caching enfrentou problemas durante o lan\u00e7amento de uma nova promo\u00e7\u00e3o. O aumento repentino no tr\u00e1fego resultou em lat\u00eancia alta e respostas lentas, pois cada solicita\u00e7\u00e3o demandava processamento completo pelo backend.</p> <p>A experi\u00eancia do usu\u00e1rio foi prejudicada, levando a impactos nos pedidos de suporte.</p>"},{"location":"mapa-de-capacidades/caching/#cenario-feliz","title":"Cen\u00e1rio feliz","text":"<p>Durante uma outra promo\u00e7\u00e3o sazonal, o tr\u00e1fego aumentou drasticamente.</p> <p>Gra\u00e7as ao caching, a maioria das solicita\u00e7\u00f5es foram servidas diretamente do cache, resultando em tempos de resposta muito mais r\u00e1pidos e redu\u00e7\u00e3o significativa da carga nos servidores backend.</p> <p>Isso permitiu uma experi\u00eancia de usu\u00e1rio suave e responsiva, aumentando as convers\u00f5es e as vendas. Al\u00e9m disso, a infraestrutura da empresa n\u00e3o precisou de expans\u00f5es emergenciais e ajustes em timeout, economizando custos.</p>"},{"location":"mapa-de-capacidades/caching/#como-configurar-o-caching-do-kong","title":"Como configurar o Caching do Kong","text":"<p>Para configurar o caching no Kong via API, siga os passos abaixo:</p>"},{"location":"mapa-de-capacidades/caching/#via-api-administrativa","title":"Via API administrativa","text":"<p>Exemplo de configura\u00e7\u00e3o:</p> <pre><code>curl --location 'http://admin-url:8001/routes/{route-id}/plugins' \\\n--header 'accept: application/json' \\\n--header 'Content-Type: application/json' \\\n--data '{\n    \"name\": \"proxy-cache\",\n    \"instance_name\": \"&lt;instance-name&gt;\",\n    \"config\": {\n        \"response_code\": [\n            200\n        ],\n        \"request_method\": [\n            \"GET\",\n            \"HEAD\"\n        ],\n        \"content_type\": [\n            \"text/plain\",\n            \"application/json\"\n        ],\n        \"cache_ttl\": 300,\n        \"strategy\": \"memory\"\n    }\n}'\n</code></pre> <p>Observe os tempos de lat\u00eancia com e sem cache.</p> <p>Sem cache </p> <p>Com cache </p>"},{"location":"mapa-de-capacidades/caching/#via-deck","title":"Via decK","text":"<p>Adicione as seguintes configura\u00e7\u00f5es em sua config decK.</p> <pre><code>routes:\n  - name: my-route  # Substitua pelo nome ou ID da sua rota\n    plugins:\n      - name: proxy-cache\n        instance_name: my-instance  # Substitua pelo nome da inst\u00e2ncia do plugin\n        config:\n          response_code:\n            - 200\n          request_method:\n            - GET\n            - HEAD\n          content_type:\n            - text/plain\n            - application/json\n          cache_ttl: 300\n          strategy: memory\n</code></pre> <p>Para implantar as configura\u00e7\u00f5es:</p> <pre><code>deck gateway sync &lt;deck-config.yaml&gt;\n</code></pre>"},{"location":"mapa-de-capacidades/caching/#via-kubernetes-ingress","title":"Via Kubernetes ingress","text":"<p>Crie um arquivo de configura\u00e7\u00e3o <code>cache.yaml</code>:</p> <pre><code>apiVersion: configuration.konghq.com/v1\nkind: KongPlugin\nmetadata:\n  name: proxy-cache-example\nplugin: proxy-cache\nconfig:\n  response_code:\n  - 200\n  request_method:\n  - GET\n  - HEAD\n  content_type:\n  - text/plain\n  - application/json\n  cache_ttl: 300\n  strategy: memory\n</code></pre> <p>Aplique as configura\u00e7\u00f5es:</p> <pre><code>kubectl apply -f cache.yaml\n</code></pre> <p>Anote o ingress com as configura\u00e7\u00f5es:</p> <pre><code>kubectl annotate service SERVICE_NAME konghq.com/plugins=proxy-cache-example\n</code></pre>"},{"location":"mapa-de-capacidades/caching/#via-kong-manager","title":"Via Kong Manager","text":"<p>Exemplo de configura\u00e7\u00e3o do plugin Proxy Cache para uma rota previamente criada:</p> <p></p> <p>Mais detalhes na documenta\u00e7\u00e3o oficial.</p>"},{"location":"mapa-de-capacidades/cors/","title":"CORS","text":"<p>CORS, ou Cross-Origin Resource Sharing, \u00e9 um mecanismo que permite que recursos restritos em uma p\u00e1gina web sejam solicitados a partir de outro dom\u00ednio fora do dom\u00ednio ao qual o recurso pertence.</p> <p>No Kong, a funcionalidade CORS \u00e9 implementada atrav\u00e9s de um plugin que facilita a configura\u00e7\u00e3o e o gerenciamento dessas permiss\u00f5es de forma centralizada e segura.</p> <p>Isso \u00e9 essencial para aplica\u00e7\u00f5es web modernas que frequentemente precisam acessar APIs e servi\u00e7os hospedados em diferentes dom\u00ednios.</p>"},{"location":"mapa-de-capacidades/cors/#por-que-utilizar-cors-no-kong","title":"Por que utilizar CORS no Kong?","text":""},{"location":"mapa-de-capacidades/cors/#cenario-infeliz","title":"Cen\u00e1rio Infeliz","text":"<p>Um gateway Kong sem a correta configura\u00e7\u00e3o de CORS permitiu que requisi\u00e7\u00f5es maliciosas fossem feitas a partir de dom\u00ednios n\u00e3o confi\u00e1veis. Isso permitiu que houvesse vazamento de dados sens\u00edveis e abriu caminho para uma s\u00e9rie de ataques de CSRF (Cross-Site Request Forgery).</p> <p>Com a implementa\u00e7\u00e3o do CORS no Kong, poderia ter sido poss\u00edvel definir quais dom\u00ednios s\u00e3o confi\u00e1veis, prevenindo acessos n\u00e3o autorizados e protegendo informa\u00e7\u00f5es confidenciais.</p>"},{"location":"mapa-de-capacidades/cors/#cenario-feliz","title":"Cen\u00e1rio Feliz","text":"<p>Um exemplo positivo do uso da funcionalidade CORS \u00e9 atrav\u00e9s de e-commerce que utiliza uma API centralizada para gerenciar o invent\u00e1rio e o processamento de pagamentos.</p> <p>O frontend da aplica\u00e7\u00e3o \u00e9 hospedado em um dom\u00ednio diferente do backend da API e ao implementar o CORS no Kong, os desenvolvedores podem configurar permiss\u00f5es espec\u00edficas que permitem que o frontend acesse os endpoints necess\u00e1rios sem comprometer a seguran\u00e7a.</p> <p>Com isso, os usu\u00e1rios podem navegar e fazer compras sem interrup\u00e7\u00f5es, resultando em uma experi\u00eancia de usu\u00e1rio fluida e segura.</p>"},{"location":"mapa-de-capacidades/cors/#como-configurar-o-cors-do-kong","title":"Como configurar o CORS do Kong","text":""},{"location":"mapa-de-capacidades/cors/#via-api-administrativa","title":"Via API administrativa","text":"<p>Voc\u00ea pode habilitar o CORS para uma rota espec\u00edfica usando o seguinte comando:</p> <pre><code>curl -X POST http://kong:8001/routes/{route_id}/plugins \\\n    --data \"name=cors\" \\\n    --data \"config.origins=*\" \\\n    --data \"config.methods=GET,POST\" \\\n    --data \"config.headers=Accept, Accept-Version, Content-Length, Content-MD5, Content-Type, Date, X-Auth-Token\" \\\n    --data \"config.exposed_headers=X-Auth-Token\" \\\n    --data \"config.credentials=true\" \\\n    --data \"config.max_age=3600\" \\\n    --data \"config.preflight_continue=false\"\n</code></pre> <p>Substitua <code>{route_id}</code> pelo ID ou nome da rota para a qual voc\u00ea deseja habilitar o CORS.</p> <p>Assim como a rota, \u00e9poss\u00edvelconfigurar para um servi\u00e7o.</p>"},{"location":"mapa-de-capacidades/cors/#via-deck","title":"Via decK","text":"<p>Adicione as seguintes configura\u00e7\u00f5es em sua config decK.</p> <pre><code>routes:\n  - name: my-route  # Substitua pelo nome ou ID da sua rota\n    plugins:\n      - name: cors\n        config:\n          origins: \"*\" # Substitua por origins permitidas\n          methods:\n            - GET\n            - POST\n          headers:\n            - Accept\n            - Accept-Version\n            - Content-Length\n            - Content-MD5\n            - Content-Type\n            - Date\n            - X-Auth-Token\n          exposed_headers:\n            - X-Auth-Token\n          credentials: true\n          max_age: 3600\n          preflight_continue: false\n</code></pre> <p>Para implantar as configura\u00e7\u00f5es:</p> <pre><code>deck gateway sync &lt;deck-config.yaml&gt;\n</code></pre>"},{"location":"mapa-de-capacidades/cors/#via-kong-manager","title":"Via Kong Manager","text":"<p>Exemplo de configura\u00e7\u00e3o do plugin CORS para uma rota previamente criada:</p>"},{"location":"mapa-de-capacidades/cors/#via-kubernetes-ingress","title":"Via Kubernetes ingress","text":"<p>Crie um arquivo de configura\u00e7\u00e3o <code>cors.yaml</code>:</p> <pre><code>apiVersion: configuration.konghq.com/v1\nkind: KongPlugin\nmetadata:\n  name: cors-example\nplugin: cors\nconfig:\n  origins:\n  - http://mockbin.com\n  methods:\n  - GET\n  - POST\n  headers:\n  - Accept\n  - Accept-Version\n  - Content-Length\n  - Content-MD5\n  - Content-Type\n  - Date\n  - X-Auth-Token\n  exposed_headers:\n  - X-Auth-Token\n  credentials: true\n  max_age: 3600\n</code></pre> <p>Aplique as configura\u00e7\u00f5es:</p> <pre><code>kubectl apply -f cors.yaml\n</code></pre> <p>Anote o ingress com as configura\u00e7\u00f5es:</p> <pre><code>kubectl annotate ingress INGRESS_NAME konghq.com/plugins=cors-example\n</code></pre> <p></p>"},{"location":"mapa-de-capacidades/cors/#verificando-a-configuracao-do-cors","title":"Verificando a configura\u00e7\u00e3o do CORS","text":"<p>Para verificar se o CORS foi configurado corretamente, acesse a rota para a qual o plugin foi habilitado pelo navegador.</p> <p>Acesse por origens permitidas e n\u00e3o permitidas em sua configura\u00e7\u00e3o.</p> <p>Sucesso:</p> <p></p> <p>Erro de CORS:</p> <p></p> <p>Mais detalhes na documenta\u00e7\u00e3o oficial.</p>"},{"location":"mapa-de-capacidades/ip-restriction/","title":"IP Restriction","text":"<p>A restri\u00e7\u00e3o de IPs no Kong Gateway \u00e9 uma funcionalidade que permite controlar o acesso a servi\u00e7os baseados em regras de endere\u00e7os IP.</p> <p>Ela pode ser usada para permitir ou negar solicita\u00e7\u00f5es de IPs espec\u00edficos ou intervalos de IPs, aumentando a seguran\u00e7a e garantindo que apenas usu\u00e1rios ou sistemas autorizados possam acessar determinados servi\u00e7os.</p>"},{"location":"mapa-de-capacidades/ip-restriction/#por-que-utilizar-a-restricao-de-ip","title":"Por que utilizar a Restri\u00e7\u00e3o de IP?","text":""},{"location":"mapa-de-capacidades/ip-restriction/#cenario-infeliz","title":"Cen\u00e1rio infeliz","text":"<p>Um atacante descobre uma vulnerabilidade no sistema e come\u00e7a a fazer solicita\u00e7\u00f5es automatizadas de IPs diversos, sobrecarregando o servi\u00e7o e tirando-o do ar.</p> <p>Isso resulta na queda do servi\u00e7o, manuten\u00e7\u00e3o e custos adicionais para mitigar o ataque e recuperar os servi\u00e7os, impactando diretamente na experi\u00eancia do usu\u00e1rio e incidentes de seguran\u00e7a.</p>"},{"location":"mapa-de-capacidades/ip-restriction/#cenario-feliz","title":"Cen\u00e1rio feliz","text":"<p>Por outro lado, considere uma cen\u00e1rio em que utiliza-se a restri\u00e7\u00e3o de IP no Kong Gateway para proteger suas APIs cr\u00edticas. Apenas IPs de redes internas e parceiros de neg\u00f3cios confi\u00e1veis s\u00e3o permitidos.</p> <p>Um dia, uma tentativa de ataque DDoS \u00e9 detectada, mas como os IPs dos atacantes n\u00e3o est\u00e3o na lista permitida, o ataque \u00e9 automaticamente bloqueado. A opera\u00e7\u00e3o continua sem interrup\u00e7\u00f5es, a confian\u00e7a dos clientes \u00e9 mantida e os custos de mitiga\u00e7\u00e3o de ataques s\u00e3o drasticamente reduzidos.</p> <p>A restri\u00e7\u00e3o de IP garante que apenas acessos leg\u00edtimos possam ocorrer, protegendo os ativos da empresa.</p>"},{"location":"mapa-de-capacidades/ip-restriction/#como-configurar-a-restricao-de-ip","title":"Como configurar a Restri\u00e7\u00e3o de IP?","text":"<p>O plugin de IP Restriction opera adicionando endere\u00e7os IP a listas brancas e negras configuradas pelo administrador.</p> <p>Quando uma solicita\u00e7\u00e3o \u00e9 recebida, o Kong verifica o IP de origem contra essas listas. Se o IP estiver na lista negra, o acesso \u00e9 bloqueado imediatamente.</p> <p>Se estiver na lista branca, o acesso \u00e9 permitido.</p> <p>Caso o IP n\u00e3o esteja em nenhuma lista, o comportamento pode ser configurado conforme a pol\u00edtica de seguran\u00e7a desejada, seja bloqueando por padr\u00e3o ou permitindo o acesso.</p> <p>Para configurar a restri\u00e7\u00e3o de IP no Kong Gateway, siga os passos abaixo:</p>"},{"location":"mapa-de-capacidades/ip-restriction/#via-api-administrativa","title":"Via API administrativa","text":"<pre><code>curl -i -X POST http://admin-url:8001/routes/{route-id}/plugins \\\n  --data name=ip-restriction \\\n  --data 'config.whitelist={allowed-ip-1},{allowed-ip-2}' \\\n  --data 'config.blacklist={unallowed-ip-1},{unallowed-ip-2}'\n</code></pre>"},{"location":"mapa-de-capacidades/ip-restriction/#via-deck","title":"Via decK","text":"<p>Adicione as seguintes configura\u00e7\u00f5es em sua config decK.</p> <pre><code>routes:\n  - name: my-route  # Substitua pelo nome ou ID da sua rota\n    plugins:\n      - name: ip-restriction\n        config:\n          whitelist:\n            - allowed-ip-1\n            - allowed-ip-2\n          blacklist:\n            - unallowed-ip-1\n            - unallowed-ip-2\n</code></pre> <p>Para implantar as configura\u00e7\u00f5es:</p> <pre><code>deck gateway sync &lt;deck-config.yaml&gt;\n</code></pre>"},{"location":"mapa-de-capacidades/ip-restriction/#via-kubernetes-ingress","title":"Via Kubernetes ingress","text":"<p>Crie um arquivo de configura\u00e7\u00e3o <code>ip-restriction.yaml</code>:</p> <pre><code>apiVersion: configuration.konghq.com/v1\nkind: KongPlugin\nmetadata:\n  name: ip-restriction-example\nplugin: ip-restriction\nconfig:\n  allow:\n  - 54.13.21.1\n  - 143.1.0.0/24\n</code></pre> <p>Aplique as configura\u00e7\u00f5es:</p> <pre><code>kubectl apply -f ip-restriction.yaml\n</code></pre> <p>Anote o ingress com as configura\u00e7\u00f5es:</p> <pre><code>kubectl annotate service SERVICE_NAME konghq.com/plugins=ip-restriction-example\n</code></pre>"},{"location":"mapa-de-capacidades/ip-restriction/#via-kong-manager","title":"Via Kong Manager","text":"<p>Mais detalhes podem ser obtidos da documenta\u00e7\u00e3o oficial Kong.</p>"},{"location":"mapa-de-capacidades/key-auth/","title":"Key Auth","text":"<p>A funcionalidade Key Auth do Kong \u00e9 um m\u00e9todo de autentica\u00e7\u00e3o que permite que os servi\u00e7os sejam protegidos por meio da verifica\u00e7\u00e3o de uma chave de acesso.</p> <p>Quando um cliente faz uma solicita\u00e7\u00e3o a um servi\u00e7o protegido, ele deve incluir uma chave de autentica\u00e7\u00e3o na solicita\u00e7\u00e3o.</p> <p>O Kong valida essa chave antes de encaminhar a solicita\u00e7\u00e3o para o servi\u00e7o, garantindo que apenas clientes autorizados possam acessar o recurso.</p>"},{"location":"mapa-de-capacidades/key-auth/#por-que-usar-key-auth","title":"Por que usar Key Auth?","text":""},{"location":"mapa-de-capacidades/key-auth/#cenario-infeliz","title":"Cen\u00e1rio infeliz","text":"<p>Antes da implementa\u00e7\u00e3o, uma API sofria tentativas de acesso n\u00e3o autorizado por um backend interno, resultando em acesso n\u00e3o autorizado.</p>"},{"location":"mapa-de-capacidades/key-auth/#cenario-feliz","title":"Cen\u00e1rio feliz","text":"<p>Ap\u00f3s a configura\u00e7\u00e3o do Key Auth, apenas os clientes com chaves de acesso v\u00e1lidas puderam fazer requisi\u00e7\u00f5es, reduzindo drasticamente os incidentes de seguran\u00e7a e melhorando o monitoramento de consumo a partir das chaves de acesso.</p>"},{"location":"mapa-de-capacidades/key-auth/#como-aplicar","title":"Como aplicar","text":""},{"location":"mapa-de-capacidades/key-auth/#via-api-administrativa","title":"Via API administrativa","text":""},{"location":"mapa-de-capacidades/key-auth/#adicionar-o-plugin-key-auth-a-uma-rota","title":"Adicionar o Plugin key-auth a uma Rota","text":"<p>O plugin key-auth pode ser associado a uma rota, servi\u00e7o ou ao consumidor. Aqui est\u00e1 um exemplo de como adicionar o plugin a uma rota:</p> <pre><code>curl -i -X POST http://localhost:8001/routes/route-id/plugins \\\n  --data \"name=key-auth\"\n</code></pre> <p>Substitua <code>route-id</code> pelo ID ou nome da sua rota. Isso habilita a autentica\u00e7\u00e3o por chave para a rota.</p> <p>Exemplo:</p> <pre><code>curl -i -X POST http://localhost:8001/routes/my-route/plugins \\\n  --data \"name=key-auth\"\n</code></pre>"},{"location":"mapa-de-capacidades/key-auth/#criar-um-consumer","title":"Criar um Consumer","text":"<p>Agora, voc\u00ea precisa criar um consumidor (usu\u00e1rio) que poder\u00e1 utilizar a chave para acessar os servi\u00e7os.</p> <pre><code>curl -i -X POST http://localhost:8001/consumers/ \\\n  --data \"username=consumer-name\"\n</code></pre> <p>Substitua <code>consumer-name</code>pelo nome do consumidor.</p> <p>Exemplo:</p> <pre><code>curl -i -X POST http://localhost:8001/consumers/ \\\n  --data \"username=my-consumer\"\n</code></pre>"},{"location":"mapa-de-capacidades/key-auth/#criar-uma-chave-de-autenticacao-para-o-consumer","title":"Criar uma Chave de Autentica\u00e7\u00e3o para o Consumer","text":"<p>Depois de criar o consumidor, adicione uma chave de API para esse consumidor:</p> <pre><code>curl -i -X POST http://localhost:8001/consumers/consumer-name/key-auth \\\n  --data \"key=custom-api-key\"\n</code></pre> <p>Se n\u00e3o fornecer a chave (deixar o campo key em branco), o Kong gerar\u00e1 uma automaticamente.</p> <p>Exemplo (com chave personalizada):</p> <pre><code>curl -i -X POST http://localhost:8001/consumers/my-consumer/key-auth \\\n  --data \"key=my-secret-api-key\"\n</code></pre> <p>Exemplo (gera\u00e7\u00e3o autom\u00e1tica da chave):</p> <pre><code>curl -i -X POST http://localhost:8001/consumers/my-consumer/key-auth\n</code></pre>"},{"location":"mapa-de-capacidades/key-auth/#consumir-a-api-usando-a-key","title":"Consumir a API Usando a Key","text":"<p>Agora que o plugin key-auth est\u00e1 configurado e a chave foi gerada, voc\u00ea pode consumir a API passando a chave no cabe\u00e7alho da requisi\u00e7\u00e3o.</p> <pre><code>curl -i -X GET http://localhost:8000/your-api-path \\\n  --header \"apikey: your-api-key\"\n</code></pre> <p>Exemplo:</p> <pre><code>curl -i -X GET http://localhost:8000/my-api \\\n  --header \"apikey: my-secret-api-key\"\n</code></pre> <p>Se a chave for v\u00e1lida, voc\u00ea ter\u00e1 acesso \u00e0 API. Caso contr\u00e1rio, uma mensagem de erro ser\u00e1 retornada.</p>"},{"location":"mapa-de-capacidades/key-auth/#via-deck","title":"Via decK","text":"<p>Adicione as seguintes configura\u00e7\u00f5es em sua config decK.</p> <pre><code>consumers:\n  - username: my-consumer\n\nkeyauth_credentials:\n  - consumer: my-consumer\n    key: my-secret-api-key\n\nroutes:\n  - name: my-route\n    plugins:\n      - name: key-auth\n</code></pre> <p>Para implantar as configura\u00e7\u00f5es:</p> <pre><code>deck gateway sync &lt;deck-config.yaml&gt;\n</code></pre>"},{"location":"mapa-de-capacidades/key-auth/#via-kubernetes-ingress","title":"Via Kubernetes ingress","text":""},{"location":"mapa-de-capacidades/key-auth/#configuracao-key-auth","title":"Configura\u00e7\u00e3o Key Auth","text":"<p>Crie um arquivo de configura\u00e7\u00e3o <code>key-auth.yaml</code>:</p> <pre><code>apiVersion: configuration.konghq.com/v1\nkind: KongPlugin\nmetadata:\n  name: key-auth-example\nplugin: key-auth\nconfig:\n  key_names:\n  - apikey\n</code></pre> <p>Aplique as configura\u00e7\u00f5es:</p> <pre><code>kubectl apply -f key-auth.yaml\n</code></pre> <p>Anote o ingress com as configura\u00e7\u00f5es:</p> <pre><code>kubectl annotate service SERVICE_NAME konghq.com/plugins=key-auth-example\n</code></pre>"},{"location":"mapa-de-capacidades/key-auth/#secret","title":"Secret","text":"<p>Crie um arquivo de configura\u00e7\u00e3o <code>key-auth-secret.yaml</code>:</p> <pre><code>apiVersion: v1\nkind: Secret\nmetadata:\n  name: alex-key-auth\n  labels:\n    konghq.com/credential: key-auth\nstringData:\n  key: hello_world\n</code></pre> <p>Aplique as configura\u00e7\u00f5es:</p> <pre><code>kubectl apply -f key-auth-secret.yaml\n</code></pre>"},{"location":"mapa-de-capacidades/key-auth/#consumer","title":"Consumer","text":"<p>Crie um arquivo de configura\u00e7\u00e3o <code>key-auth-consumer.yaml</code>:</p> <pre><code>kind: KongConsumer\nmetadata:\n  name: alex\n  annotations:\n    kubernetes.io/ingress.class: kong\nusername: alex\ncredentials:\n- alex-key-auth\n</code></pre> <p>Aplique as configura\u00e7\u00f5es:</p> <pre><code>kubectl apply -f key-auth-consumer.yaml\n</code></pre>"},{"location":"mapa-de-capacidades/key-auth/#via-kong-manager","title":"Via Kong Manager","text":"<p>Exemplo de configura\u00e7\u00e3o do plugin Key-auth para uma rota previamente criada:</p> <p></p> <p>Mais detalhes na documenta\u00e7\u00e3o oficial.</p>"},{"location":"mapa-de-capacidades/rate-limit/","title":"Rate Limit","text":"<p>Rate Limiting \u00e9 uma t\u00e9cnica utilizada para controlar o n\u00famero de solicita\u00e7\u00f5es que um usu\u00e1rio pode fazer a um servi\u00e7o em um determinado per\u00edodo.</p> <p>No contexto do Kong, uma API Gateway, esta funcionalidade ajuda a proteger os servi\u00e7os contra abusos, como ataques DDoS (Distributed Denial of Service), garantindo que os recursos sejam distribu\u00eddos de maneira justa entre todos os usu\u00e1rios.</p>"},{"location":"mapa-de-capacidades/rate-limit/#quando-deveria-ser-utilizado-o-rate-limiting","title":"Quando Deveria Ser Utilizado o Rate Limiting?","text":"<p>Rate Limiting deve ser utilizado em situa\u00e7\u00f5es onde h\u00e1 a necessidade de controlar o acesso aos recursos da API para evitar abusos e garantir a qualidade do servi\u00e7o.</p> <p>Isso \u00e9 particularmente importante durante eventos de alta demanda, como promo\u00e7\u00f5es de vendas, lan\u00e7amentos de produtos ou per\u00edodos de alta carga sazonal.</p> <p>Por exemplo, durante uma Black Friday, uma plataforma de e-commerce deve usar Rate Limiting para evitar que bots sobrecarreguem a API com solicita\u00e7\u00f5es excessivas, garantindo que todos os clientes reais tenham uma experi\u00eancia de compra satisfat\u00f3ria.</p>"},{"location":"mapa-de-capacidades/rate-limit/#por-que-utilizar-o-rate-limiting","title":"Por Qu\u00ea Utilizar o Rate Limiting?","text":""},{"location":"mapa-de-capacidades/rate-limit/#cenario-infeliz","title":"Cen\u00e1rio Infeliz","text":"<p>Considere um cen\u00e1rio onde a empresa n\u00e3o implementou Rate Limiting.</p> <p>Durante um ataque DDoS, milhares de solicita\u00e7\u00f5es s\u00e3o enviadas para a API, sobrecarregando os servidores e tornando os servi\u00e7os indispon\u00edveis para os clientes leg\u00edtimos.</p> <p>Isso n\u00e3o apenas afeta a experi\u00eancia do usu\u00e1rio, mas tamb\u00e9m pode resultar em perdas financeiras significativas e danos \u00e0 reputa\u00e7\u00e3o da empresa.</p> <p>A aus\u00eancia de Rate Limiting impede que o sistema se proteja automaticamente contra abusos, resultando em uma falhas de servi\u00e7o durante um momento cr\u00edtico.</p>"},{"location":"mapa-de-capacidades/rate-limit/#cenario-feliz","title":"Cen\u00e1rio Feliz","text":"<p>Agora imagine uma plataforma de e-commerce durante uma grande promo\u00e7\u00e3o. Sem Rate Limiting, a API poderia ser sobrecarregada por bots ou usu\u00e1rios mal-intencionados fazendo um grande n\u00famero de solicita\u00e7\u00f5es em um curto per\u00edodo.</p> <p>Isso poderia resultar em lentid\u00e3o ou indisponibilidade do servi\u00e7o para todos os usu\u00e1rios.</p> <p>Com Rate Limiting, o administrador pode definir limites que garantem que nenhum usu\u00e1rio ou bot fa\u00e7a mais solicita\u00e7\u00f5es do que o permitido, mantendo a API est\u00e1vel e dispon\u00edvel para todos.</p> <p>Os clientes conseguem realizar suas compras sem problemas, e a empresa mant\u00e9m sua reputa\u00e7\u00e3o intacta.</p>"},{"location":"mapa-de-capacidades/rate-limit/#como-implementar-rate-limiting","title":"Como Implementar Rate Limiting?","text":""},{"location":"mapa-de-capacidades/rate-limit/#via-api-administrativa","title":"Via API administrativa","text":"<p>Considere uma rota chamada <code>my-route</code>:</p> <pre><code>curl -i -X POST http://localhost:8001/routes/my-route/plugins \\\n  --data name=rate-limiting \\\n  --data config.second=5 \\\n  --data config.minute=30 \\\n  --data config.hour=900\n</code></pre> <p>Esta configura\u00e7\u00e3o acabou de definir que para esta rota teremos permitidas 5 requisi\u00e7\u00f5es por segundo, 30 por minuto e 900 requisi\u00e7\u00f5es por hora.</p>"},{"location":"mapa-de-capacidades/rate-limit/#via-deck","title":"Via decK","text":"<p>Adicione as seguintes configura\u00e7\u00f5es em sua config decK.</p> <pre><code>routes:\n  - name: my-route  # Substitua pelo nome ou ID da sua rota\n    plugins:\n      - name: rate-limiting\n        config:\n          second: 5\n          minute: 30\n          hour: 900\n</code></pre> <p>Para implantar as configura\u00e7\u00f5es:</p> <pre><code>deck gateway sync &lt;deck-config.yaml&gt;\n</code></pre>"},{"location":"mapa-de-capacidades/rate-limit/#via-kubernetes-ingress","title":"Via Kubernetes ingress","text":"<p>Crie um arquivo de configura\u00e7\u00e3o <code>rate-limit.yaml</code>:</p> <pre><code>apiVersion: configuration.konghq.com/v1\nkind: KongPlugin\nmetadata:\n  name: rate-limiting-example\nplugin: rate-limiting\nconfig:\n  second: 5\n  hour: 10000\n  policy: local\n</code></pre> <p>Aplique as configura\u00e7\u00f5es:</p> <pre><code>kubectl apply -f rate-limit.yaml\n</code></pre> <p>Anote o ingress com as configura\u00e7\u00f5es:</p> <pre><code>kubectl annotate ingress INGRESS_NAME konghq.com/plugins=rate-limiting-example\n</code></pre>"},{"location":"mapa-de-capacidades/rate-limit/#via-kong-manager","title":"Via Kong Manager","text":"<p>Mais detalhes podem ser obtidos da documenta\u00e7\u00e3o oficial Kong.</p>"},{"location":"mapa-de-capacidades/request-size-limit/","title":"Request size limit","text":"<p>A funcionalidade de Limita\u00e7\u00e3o do Tamanho da Requisi\u00e7\u00e3o do Kong Gateway, implementada pelo plugin <code>request size limiting</code>, permite definir um limite m\u00e1ximo para o tamanho das requisi\u00e7\u00f5es HTTP/HTTPS que um servi\u00e7o pode receber.</p> <p>Esta funcionalidade \u00e9 crucial para garantir a seguran\u00e7a e a efici\u00eancia do tr\u00e1fego, prevenindo que requisi\u00e7\u00f5es excessivamente grandes comprometam o desempenho do servidor ou exponham vulnerabilidades.</p>"},{"location":"mapa-de-capacidades/request-size-limit/#por-que-utilizar-a-limitacao-do-tamanho-da-requisicao","title":"Por que utilizar a Limita\u00e7\u00e3o do Tamanho da Requisi\u00e7\u00e3o?","text":""},{"location":"mapa-de-capacidades/request-size-limit/#cenario-infeliz","title":"Cen\u00e1rio infeliz","text":"<p>Imagine uma plataforma permita o upload de imagens para produtos. Sem uma limita\u00e7\u00e3o no tamanho das requisi\u00e7\u00f5es, um usu\u00e1rio mal-intencionado pode tentar enviar arquivos extremamente grandes para sobrecarregar o servidor.</p> <p>Isso pode levar a uma degrada\u00e7\u00e3o significativa do desempenho, causando lentid\u00e3o para outros usu\u00e1rios e potencialmente derrubando o servi\u00e7o. Al\u00e9m disso, requisi\u00e7\u00f5es muito grandes podem explorar falhas no processamento de arquivos, criando brechas de seguran\u00e7a.</p>"},{"location":"mapa-de-capacidades/request-size-limit/#caso-feliz","title":"Caso Feliz","text":"<p>Consideremos uma aplica\u00e7\u00e3o cr\u00edtica armazena registros em escala. Com a limita\u00e7\u00e3o do tamanho das requisi\u00e7\u00f5es implementada, o sistema impede que uploads acidentais ou maliciosos de grandes arquivos causem interrup\u00e7\u00f5es.</p> <p>Isso garante que os servi\u00e7os cr\u00edticos continuem funcionando sem problemas e que os dados sens\u00edveis permane\u00e7am protegidos. Al\u00e9m disso, a aplica\u00e7\u00e3o pode otimizar o uso de recursos, garantindo que a capacidade do servidor seja utilizada eficientemente, de acordo com o planejado.</p>"},{"location":"mapa-de-capacidades/request-size-limit/#como-configurar-a-limitacao-do-tamanho-da-requisicao","title":"Como configurar a Limita\u00e7\u00e3o do Tamanho da Requisi\u00e7\u00e3o?","text":""},{"location":"mapa-de-capacidades/request-size-limit/#via-api-administrativa","title":"Via API administrativa","text":"<p>Para configurar a limita\u00e7\u00e3o do tamanho da requisi\u00e7\u00e3o no Kong via API, siga os passos abaixo</p> <p>Considere a configura\u00e7\u00e3o abaixo para limitar o tamanho das requisi\u00e7\u00f5es de uma rota <code>request-size-limiting</code>:</p> <pre><code>curl -i -X POST http://localhost:8001/routes/request-size-limiting/plugins \\\n  --data name=request-size-limiting \\\n  --data config.allowed_payload_size=128\n</code></pre> <p>Neste exemplo, <code>config.allowed_payload_size</code> define o tamanho m\u00e1ximo permitido para a requisi\u00e7\u00e3o em kilobytes.</p> <p>Neste caso, 128KB. Quando ultrapassado o limite, voc\u00ea deve esperar um retorno como este:</p> <pre><code>{\n    \"message\": \"Request size limit exceeded\",\n    \"request_id\": \"4c9607649b53926a7cf83d285e5dd54e\"\n}\n</code></pre>"},{"location":"mapa-de-capacidades/request-size-limit/#via-deck","title":"Via decK","text":"<p>Adicione as seguintes configura\u00e7\u00f5es em sua config decK.</p> <pre><code>routes:\n  - name: request-size-limiting  # Substitua pelo nome ou ID da sua rota\n    plugins:\n      - name: request-size-limiting\n        config:\n          allowed_payload_size: 128\n          require_content_length: false\n          size_unit: bytes\n</code></pre> <p>Para implantar as configura\u00e7\u00f5es:</p> <pre><code>deck gateway sync &lt;deck-config.yaml&gt;\n</code></pre>"},{"location":"mapa-de-capacidades/request-size-limit/#via-kubernetes-ingress","title":"Via Kubernetes ingress","text":"<p>Crie um arquivo de configura\u00e7\u00e3o <code>request-size-limit.yaml</code>:</p> <pre><code>apiVersion: configuration.konghq.com/v1\nkind: KongPlugin\nmetadata:\n  name: request-size-limiting-example\nplugin: request-size-limiting\nconfig:\n  allowed_payload_size: 128\n  require_content_length: false\n</code></pre> <p>Aplique as configura\u00e7\u00f5es:</p> <pre><code>kubectl apply -f request-size-limit.yaml\n</code></pre> <p>Anote o ingress com as configura\u00e7\u00f5es:</p> <pre><code>kubectl annotate ingress INGRESS_NAME konghq.com/plugins=request-size-limiting-example\n</code></pre>"},{"location":"mapa-de-capacidades/request-size-limit/#via-kong-manager","title":"Via Kong Manager","text":"<p>Mais detalhes podem ser obtidos da documenta\u00e7\u00e3o oficial Kong.</p>"},{"location":"mapa-de-capacidades/request-termination/","title":"Request termination","text":"<p>A funcionalidade do plugin <code>Request Termination</code> permite o encerramento de uma solicita\u00e7\u00e3o HTTP antes de ser encaminhada para o servi\u00e7o backend. Isto pode ser \u00fatil em diversos cen\u00e1rios, incluindo manuten\u00e7\u00e3o de seguran\u00e7a e controle de tr\u00e1fego.</p> <p>Como vantagens, o plugin pode ser configurado para retornar diferentes c\u00f3digos de status HTTP, cabe\u00e7alhos personalizados e um corpo de resposta customizado.</p>"},{"location":"mapa-de-capacidades/request-termination/#por-que-utilizar-request-termination","title":"Por Que Utilizar Request Termination?","text":"<p>Durante per\u00edodos de manuten\u00e7\u00e3o programada, o plugin pode ser usado para retornar uma mensagem espec\u00edfica aos clientes informando sobre a indisponibilidade tempor\u00e1ria do servi\u00e7o.</p> <p>Para APIs que requerem controle de acesso rigoroso, o plugin pode ser configurado para terminar requisi\u00e7\u00f5es de clientes n\u00e3o autorizados, retornando um c\u00f3digo de status 403 (Forbidden) ou 401 (Unauthorized).</p> <p>O plugin pode ser usado para garantir o cumprimento de pol\u00edticas de uso, terminando requisi\u00e7\u00f5es que n\u00e3o est\u00e3o em conformidade com os termos de servi\u00e7o. Por exemplo, ele pode bloquear requisi\u00e7\u00f5es de regi\u00f5es geogr\u00e1ficas espec\u00edficas onde o servi\u00e7o n\u00e3o est\u00e1 dispon\u00edvel.</p> <p>Para proteger recursos sens\u00edveis que s\u00f3 devem ser acessados por determinados usu\u00e1rios ou durante per\u00edodos espec\u00edficos, o plugin pode terminar requisi\u00e7\u00f5es fora dessas condi\u00e7\u00f5es, aumentando a seguran\u00e7a dos dados.</p> <p>Se uma vulnerabilidade de seguran\u00e7a for descoberta, o plugin pode ser rapidamente configurado para bloquear requisi\u00e7\u00f5es que exploram essa vulnerabilidade at\u00e9 que uma corre\u00e7\u00e3o definitiva seja implementada, protegendo o sistema contra ataques.</p> <p>Quando novas fun\u00e7\u00f5es est\u00e3o em fase beta e devem ser acessadas apenas por um grupo seleto de usu\u00e1rios, o plugin pode terminar requisi\u00e7\u00f5es de usu\u00e1rios n\u00e3o autorizados, controlando o acesso e coleta de feedback de maneira mais segura e organizada.</p> <p>O plugin pode ser usado para terminar requisi\u00e7\u00f5es espec\u00edficas e retornar respostas personalizadas baseadas em determinadas condi\u00e7\u00f5es, como hor\u00e1rios de funcionamento ou eventos especiais. Isso permite uma comunica\u00e7\u00e3o mais precisa e contextualizada com os usu\u00e1rios.</p>"},{"location":"mapa-de-capacidades/request-termination/#como-configurar-o-plugin","title":"Como configurar o plugin","text":""},{"location":"mapa-de-capacidades/request-termination/#via-api-administrativa","title":"Via API administrativa","text":"<p>Considere a configura\u00e7\u00e3o de uma rota chamada <code>request-termination</code>. A configura\u00e7\u00e3o do plugin pode ser feita como a abaixo.</p> <pre><code>    curl -X POST http://localhost:8001/routes/request-termination/plugins \\\n    -d \"name=request-termination\"  \\\n    -d \"config.status_code=403\" \\\n    -d \"config.message=This route is temporarily unavailable.\"\n</code></pre> <p>Neste exemplo, estamos configurando o plugin para retornar um c\u00f3digo de status HTTP 403 com a mensagem <code>This service is temporarily unavailable.</code> para todas as solicita\u00e7\u00f5es para a rota especificada.</p>"},{"location":"mapa-de-capacidades/request-termination/#via-deck","title":"Via decK","text":"<p>Adicione as seguintes configura\u00e7\u00f5es em sua config decK.</p> <pre><code>routes:\n  - name: request-termination  # Substitua pelo nome ou ID da sua rota\n    plugins:\n      - name: request-termination\n        config:\n          status_code: 403\n          message: \"This route is temporarily unavailable.\"\n</code></pre> <p>Para implantar as configura\u00e7\u00f5es:</p> <pre><code>deck gateway sync &lt;deck-config.yaml&gt;\n</code></pre>"},{"location":"mapa-de-capacidades/request-termination/#via-kubernetes-ingress","title":"Via Kubernetes ingress","text":"<p>Crie um arquivo de configura\u00e7\u00e3o <code>request-termination.yaml</code>:</p> <pre><code>apiVersion: configuration.konghq.com/v1\nkind: KongPlugin\nmetadata:\n  name: request-termination\nplugin: request-termination\nconfig:\n  status_code: 403\n  message: \"This route is temporarily unavailable.\"\n</code></pre> <p>Aplique as configura\u00e7\u00f5es:</p> <pre><code>kubectl apply -f request-size-limit.yaml\n</code></pre> <p>Anote o ingress com as configura\u00e7\u00f5es:</p> <pre><code>kubectl annotate service SERVICE_NAME konghq.com/plugins=request-termination-example\n</code></pre>"},{"location":"mapa-de-capacidades/request-termination/#via-kong-manager","title":"Via Kong Manager","text":"<p>Exemplo de configura\u00e7\u00e3o do plugin <code>Request Termination</code> para uma rota previamente criada:</p> <p></p>"},{"location":"mapa-de-capacidades/request-termination/#forward-proxy-plugin","title":"Forward Proxy plugin","text":"<p>O plugin <code>Request Termination</code> n\u00e3o ser\u00e1 executado se o plugin <code>Forward Proxy</code> estiver habilitado.</p> <p>O plugin <code>Forward Proxy</code> tem prioridade mais alta que o plugin <code>Request Termination</code>. Quando executado, a solicita\u00e7\u00e3o \u00e9 encaminhada de acordo com a configura\u00e7\u00e3o desse plugin.</p> <p>Se precisar alterar esse comportamento, voc\u00ea dever\u00e1 configurar o plug-in Request Termination para ser executado antes do plug-in Forward Proxy usando <code>Dynamic Plugin Ordering</code> (dispon\u00edvel para a vers\u00e3o enterprise).</p> <p>Mais detalhes na documenta\u00e7\u00e3o oficial.</p>"},{"location":"mapa-de-capacidades/request-transform/","title":"Request transform","text":"<p>O Request Transform \u00e9 uma funcionalidade do Kong Gateway que permite modificar, adicionar ou remover dados das requisi\u00e7\u00f5es HTTP antes que elas sejam encaminhadas para os servi\u00e7os de backend.</p> <p>Essa capacidade de transforma\u00e7\u00e3o pode incluir a manipula\u00e7\u00e3o de cabe\u00e7alhos, par\u00e2metros de consulta, corpo da requisi\u00e7\u00e3o e outras partes da mensagem HTTP.</p>"},{"location":"mapa-de-capacidades/request-transform/#por-que-utilizar","title":"Por qu\u00ea utilizar?","text":"<p>A transforma\u00e7\u00e3o de requisi\u00e7\u00f5es \u00e9 crucial para garantir que as solicita\u00e7\u00f5es que chegam aos seus servi\u00e7os backend estejam no formato correto e contenham as informa\u00e7\u00f5es necess\u00e1rias para um processamento eficiente e seguro.</p> <p>Isso pode ser particularmente \u00fatil em cen\u00e1rios onde h\u00e1 uma necessidade de compatibilidade entre diferentes sistemas ou quando \u00e9 necess\u00e1rio filtrar e sanitizar dados para evitar vulnerabilidades de seguran\u00e7a.</p>"},{"location":"mapa-de-capacidades/request-transform/#cenario-infeliz","title":"Cen\u00e1rio Infeliz","text":"<p>Um e-commerce implementou um servi\u00e7o de pagamentos legado que n\u00e3o envia algumas informa\u00e7\u00f5es necess\u00e1rias ao funcionamento da nova arquitetura.</p> <p>No entanto, o servi\u00e7o mais moderno n\u00e3o consegue processar informa\u00e7\u00f5es que n\u00e3o contenham atributos e cabe\u00e7alhos na requisi\u00e7\u00e3o</p> <p>Como resultado, algumas tentativas de pagamento falham, causando perda de vendas e frustra\u00e7\u00e3o dos clientes. O mecanismo de transforma\u00e7\u00e3o de requisi\u00e7\u00f5es seria uma solu\u00e7\u00e3o r\u00e1pida e eficiente para esse problema.</p>"},{"location":"mapa-de-capacidades/request-transform/#cenario-feliz","title":"Cen\u00e1rio Feliz","text":"<p>O e-commerce est\u00e1 migrando seu sistema de backend para um novo provedor de API que requer um formato de requisi\u00e7\u00e3o diferente do utilizado atualmente.</p> <p>Usando a funcionalidade de Request Transform do Kong, a equipe de desenvolvimento configurou rapidamente as transforma\u00e7\u00f5es necess\u00e1rias, assegurando que todas as requisi\u00e7\u00f5es sejam adaptadas ao novo formato sem necessitar de modifica\u00e7\u00f5es no c\u00f3digo do frontend.</p> <p>Isso resultou em uma transi\u00e7\u00e3o suave e sem interrup\u00e7\u00f5es no servi\u00e7o, com o m\u00ednimo de atritos.</p> <p>O Request Transform \u00e9 particularmente ben\u00e9fico para aplica\u00e7\u00f5es que interagem com m\u00faltiplos servi\u00e7os de backend, especialmente aquelas que operam em ambientes complexos onde diferentes sistemas e servi\u00e7os utilizam formatos e protocolos variados.</p>"},{"location":"mapa-de-capacidades/request-transform/#como-implementar","title":"Como implementar?","text":""},{"location":"mapa-de-capacidades/request-transform/#via-api-administrativa","title":"Via API administrativa","text":"<p>Exemplo de configura\u00e7\u00e3o:</p> <pre><code>curl -X POST http://localhost:8001/routes/{routeName|Id}/plugins \\\n   --header \"accept: application/json\" \\\n   --header \"Content-Type: application/json\" \\\n   --data '\n   {\n \"name\": \"request-transformer\",\n \"config\": {\n   \"remove\": {\n     \"headers\": [\n       \"x-toremove\"\n    ],\n     \"querystring\": [\n       \"qs-old-name:qs-new-name\",\n       \"qs2-old-name:qs2-new-name\"\n     ],\n     \"body\": [\n       \"formparam-toremove\",\n       \"formparam-another-one\"\n     ]\n   },\n   \"replace\": {\n     \"body\": [\n       \"body-param1:new-value-1\",\n       \"body-param2:new-value-2\"\n     ]\n   },\n   \"rename\": {\n     \"headers\": [\n       \"header-old-name:header-new-name\",\n       \"another-old-name:another-new-name\"\n     ],\n     \"querystring\": [\n       \"qs-old-name:qs-new-name\",\n       \"qs2-old-name:qs2-new-name\"\n     ],\n     \"body\": [\n       \"param-old:param-new\",\n       \"param2-old:param2-new\"\n     ]\n   },\n   \"add\": {\n     \"headers\": [\n       \"x-new-header:value\",\n       \"x-another-header:something\"\n     ],\n     \"querystring\": [\n       \"new-param:some_value\",\n       \"another-param:some_value\"\n     ],\n     \"body\": [\n       \"new-form-param:some_value\",\n       \"another-form-param:some_value\"\n     ]\n   }\n }\n}\n</code></pre>"},{"location":"mapa-de-capacidades/request-transform/#via-deck","title":"Via decK","text":"<p>Adicione as seguintes configura\u00e7\u00f5es em sua config decK.</p> <pre><code>    plugins:\n      - name: request-transformer\n        enabled: true\n        instance_name: sample-request_transform-v1\n        config:\n          add:\n            body:\n              - a_brand_new_attribute:i'm added by kong request transform plugin\n            headers:\n              - X-Custom-Header:I didn't exist before kong request transform plugin\n            querystring: []\n          append:\n            body: []\n            headers: []\n            querystring: []\n          http_method: null\n          remove:\n            body:\n              - a_future_removed_attribute\n            headers: []\n            querystring: []\n          rename:\n            body: []\n            headers: []\n            querystring: []\n          replace:\n            body:\n              - a_future_updated_attribute:10000.00\n            headers: []\n            querystring: []\n            uri: null\n        protocols:\n          - grpc\n          - grpcs\n          - http\n          - https\n        tags:\n          - sample\n          - request transform\n</code></pre> <p>Para implantar as configura\u00e7\u00f5es:</p> <pre><code>deck gateway sync &lt;deck-config.yaml&gt;\n</code></pre>"},{"location":"mapa-de-capacidades/request-transform/#via-kubernetes-ingress","title":"Via Kubernetes ingress","text":"<p>Crie um arquivo de configura\u00e7\u00e3o <code>request-transform.yaml</code>:</p> <pre><code>kind: KongPlugin\nmetadata:\n  name: request-transformer-example\nplugin: request-transformer\nconfig:\n  remove:\n    headers:\n    - x-toremove\n    - x-another-one\n    querystring:\n    - qs-old-name:qs-new-name\n    - qs2-old-name:qs2-new-name\n    body:\n    - formparam-toremove\n    - formparam-another-one\n  replace:\n    body:\n    - body-param1:new-value-1\n    - body-param2:new-value-2\n  rename:\n    headers:\n    - header-old-name:header-new-name\n    - another-old-name:another-new-name\n    querystring:\n    - qs-old-name:qs-new-name\n    - qs2-old-name:qs2-new-name\n    body:\n    - param-old:param-new\n    - param2-old:param2-new\n  add:\n    headers:\n    - x-new-header:value\n    - x-another-header:something\n    querystring:\n    - new-param:some_value\n    - another-param:some_value\n    body:\n    - new-form-param:some_value\n    - another-form-param:some_value\n</code></pre> <p>Aplique as configura\u00e7\u00f5es:</p> <pre><code>kubectl apply -f request-transform.yaml\n</code></pre> <p>Anote o ingress com as configura\u00e7\u00f5es:</p> <pre><code>kubectl annotate ingress INGRESS_NAME konghq.com/plugins=request-transformer-example\n</code></pre>"},{"location":"mapa-de-capacidades/request-transform/#via-kong-manager","title":"Via Kong Manager","text":"<p>Mais detalhes na documenta\u00e7\u00e3o oficial.</p>"},{"location":"mapa-de-capacidades/response-transform/","title":"Response Transform","text":"<p>A funcionalidade de transforma\u00e7\u00e3o de respostas no Kong permite modificar o conte\u00fado das respostas HTTP antes que elas sejam enviadas de volta ao cliente.</p> <p>Isso pode envolver a reestrutura\u00e7\u00e3o do JSON, a substitui\u00e7\u00e3o de palavras ou frases, a adi\u00e7\u00e3o de metadados ou a sanitiza\u00e7\u00e3o de dados sens\u00edveis.</p> <p>Por exemplo, uma API que retorna dados financeiros pode usar essa funcionalidade para mascarar informa\u00e7\u00f5es sens\u00edveis como n\u00fameros de conta antes de enviar a resposta ao cliente final.</p>"},{"location":"mapa-de-capacidades/response-transform/#por-que-utilizar","title":"Por que utilizar?","text":""},{"location":"mapa-de-capacidades/response-transform/#cenario-infeliz","title":"Cen\u00e1rio Infeliz","text":"<p>Um servi\u00e7o de pagamento retorna dados de transa\u00e7\u00f5es sem mascarar os detalhes dos cart\u00f5es de cr\u00e9dito coloca os dados sens\u00edveis dos usu\u00e1rios em risco.</p> <p>Um cliente mal-intencionado poderia interceptar essas respostas e usar as informa\u00e7\u00f5es para fraudes. Sem a transforma\u00e7\u00e3o de respostas, a empresa pode enfrentar consequ\u00eancias legais e uma perda significativa de confian\u00e7a dos clientes.</p>"},{"location":"mapa-de-capacidades/response-transform/#cenario-feliz","title":"Cen\u00e1rio Feliz","text":"<p>Considere agora que no cen\u00e1rio anterior foram removidas todas as informa\u00e7\u00f5es sigilosas do usu\u00e1rio. Em termos de compliance e seguran\u00e7a da informa\u00e7\u00e3o, a arquitetura se encontra protegida e garante a sua conformidade.</p>"},{"location":"mapa-de-capacidades/response-transform/#como-configurar-a-transformacao-de-resposta","title":"Como configurar a Transforma\u00e7\u00e3o de Resposta?","text":"<p>A implementa\u00e7\u00e3o da transforma\u00e7\u00e3o de request no Kong ser\u00e1 feita atrav\u00e9s do plugin <code>Request Transform</code>.</p>"},{"location":"mapa-de-capacidades/response-transform/#via-api-administrativa","title":"Via API administrativa","text":"<p>Exemplo de configura\u00e7\u00e3o:</p> <pre><code>curl -X POST http://localhost:8001/services/{serviceName|Id}/plugins \\\n   --header \"accept: application/json\" \\\n   --header \"Content-Type: application/json\" \\\n   --data '\n   {\n \"name\": \"response-transformer\",\n \"config\": {\n   \"remove\": {\n     \"headers\": [\n       \"x-toremove\",\n       \"x-another-one\"\n     ],\n     \"json\": [\n       \"json-key-toremove\",\n       \"another-json-key\"\n     ]\n   },\n   \"add\": {\n     \"headers\": [\n       \"x-new-header:value\",\n       \"x-another-header:something\"\n     ],\n     \"json\": [\n       \"new-json-key:some_value\",\n       \"another-json-key:some_value\"\n     ],\n     \"json_types\": [\n       \"string\",\n       \"boolean\",\n       \"number\"\n     ]\n   },\n   \"append\": {\n     \"headers\": [\n       \"x-existing-header:some_value\",\n       \"x-another-header:some_value\"\n     ]\n   }\n }\n}\n</code></pre>"},{"location":"mapa-de-capacidades/response-transform/#via-deck","title":"Via decK","text":"<p>Adicione as seguintes configura\u00e7\u00f5es em sua config decK.</p> <pre><code>services:\n  - name: your-service-name  # Substitua pelo nome ou ID do seu servi\u00e7o\n    plugins:\n      - name: response-transformer\n        enabled: true\n        config:\n          remove:\n            headers:\n              - x-toremove\n              - x-another-one\n            json:\n              - json-key-toremove\n              - another-json-key\n          add:\n            headers:\n              - x-new-header:value\n              - x-another-header:something\n            json:\n              - new-json-key:some_value\n              - another-json-key:some_value\n            json_types:\n              - string\n              - boolean\n              - number\n          append:\n            headers:\n              - x-existing-header:some_value\n              - x-another-header:some_value\n</code></pre> <p>Para implantar as configura\u00e7\u00f5es:</p> <pre><code>deck gateway sync &lt;deck-config.yaml&gt;\n</code></pre>"},{"location":"mapa-de-capacidades/response-transform/#via-kubernetes-ingress","title":"Via Kubernetes ingress","text":"<p>Crie um arquivo de configura\u00e7\u00e3o <code>response-transform.yaml</code>:</p> <pre><code>apiVersion: configuration.konghq.com/v1\nkind: KongPlugin\nmetadata:\n  name: response-transformer-example\nplugin: response-transformer\nconfig:\n  remove:\n    headers:\n    - x-toremove\n    - x-another-one\n    json:\n    - json-key-toremove\n    - another-json-key\n  add:\n    headers:\n    - x-new-header:value\n    - x-another-header:something\n    json:\n    - new-json-key:some_value\n    - another-json-key:some_value\n    json_types:\n    - string\n    - boolean\n    - number\n  append:\n    headers:\n    - x-existing-header:some_value\n    - x-another-header:some_value\n</code></pre> <p>Aplique as configura\u00e7\u00f5es:</p> <pre><code>kubectl apply -f response-transform.yaml\n</code></pre> <p>Anote o ingress com as configura\u00e7\u00f5es:</p> <pre><code>kubectl annotate ingress INGRESS_NAME konghq.com/plugins=response-transformer-example\n</code></pre>"},{"location":"mapa-de-capacidades/response-transform/#via-kong-manager","title":"Via Kong Manager","text":"<p>Mais detalhes na documenta\u00e7\u00e3o oficial.</p>"},{"location":"monitoramento-e-observabilidade/grafana/configura%C3%A7%C3%A3o/","title":"Configura\u00e7\u00e3o","text":"<p>O grafana possui uma s\u00e9rie de Dashboards pr\u00e9-configurados para atender ao Kong.</p> <p></p> <p>Para fazer uso de um dos dashboards pr\u00e9-configurados basta realizar o download na se\u00e7\u00e3o de dashboards.</p> <p>Importe o arquivo json de configura\u00e7\u00e3o na se\u00e7\u00e3o de dashboards:</p> <p>Exemplo de configura\u00e7\u00e3o:</p> <p></p>"},{"location":"monitoramento-e-observabilidade/grafana/introducao/","title":"Introdu\u00e7\u00e3o","text":"<p>O Grafana \u00e9 uma ferramenta poderosa e popular para monitoramento e visualiza\u00e7\u00e3o de dados. Aqui est\u00e3o algumas raz\u00f5es para utilizar o Grafana:</p>"},{"location":"monitoramento-e-observabilidade/grafana/introducao/#paineis-interativos","title":"Pain\u00e9is Interativos","text":"<p>Grafana permite a cria\u00e7\u00e3o de pain\u00e9is (dashboards) altamente interativos e personaliz\u00e1veis, facilitando a visualiza\u00e7\u00e3o de m\u00e9tricas de sistemas e aplica\u00e7\u00f5es</p>"},{"location":"monitoramento-e-observabilidade/grafana/introducao/#variedade-de-graficos","title":"Variedade de Gr\u00e1ficos","text":"<p>Suporta diversos tipos de gr\u00e1ficos, como gr\u00e1ficos de linhas, barras, tabelas, heatmaps, entre outros, permitindo uma visualiza\u00e7\u00e3o clara e eficaz dos dados</p>"},{"location":"monitoramento-e-observabilidade/grafana/introducao/#flexibilidade","title":"Flexibilidade","text":"<p>Pode se conectar a uma ampla gama de fontes de dados, incluindo Prometheus, Elasticsearch, Graphite, InfluxDB, MySQL, PostgreSQL, e muitos outros</p>"},{"location":"monitoramento-e-observabilidade/grafana/introducao/#consolidacao-de-dados","title":"Consolida\u00e7\u00e3o de Dados","text":"<p>Permite a consolida\u00e7\u00e3o de dados de diferentes fontes em um \u00fanico painel, facilitando a correla\u00e7\u00e3o e an\u00e1lise de informa\u00e7\u00f5es</p>"},{"location":"monitoramento-e-observabilidade/grafana/introducao/#alertas-configuraveis","title":"Alertas Configur\u00e1veis","text":"<p>Grafana oferece um sistema de alertas robusto que pode ser configurado para monitorar m\u00e9tricas cr\u00edticas e enviar notifica\u00e7\u00f5es quando certos limites s\u00e3o ultrapassados</p>"},{"location":"monitoramento-e-observabilidade/grafana/introducao/#notificacoes-multicanal","title":"Notifica\u00e7\u00f5es Multicanal","text":"<p>As notifica\u00e7\u00f5es podem ser enviadas atrav\u00e9s de diversos canais, como e-mail, Slack, PagerDuty, e outros, garantindo que as equipes sejam alertadas rapidamente sobre problemas</p>"},{"location":"monitoramento-e-observabilidade/grafana/introducao/#plugins-e-extensoes","title":"Plugins e Extens\u00f5es","text":"<p>Grafana possui uma vasta biblioteca de plugins que podem ser utilizados para estender suas funcionalidades, desde novos tipos de gr\u00e1ficos at\u00e9 integra\u00e7\u00f5es com outras ferramentas</p>"},{"location":"monitoramento-e-observabilidade/grafana/introducao/#templating","title":"Templating","text":"<p>Suporta vari\u00e1veis e templates, permitindo a cria\u00e7\u00e3o de pain\u00e9is din\u00e2micos e reutiliz\u00e1veis, adaptando-se a diferentes contextos e necessidades</p>"},{"location":"monitoramento-e-observabilidade/grafana/introducao/#implementacao-on-premises-e-em-nuvem","title":"Implementa\u00e7\u00e3o On-Premises e em Nuvem","text":"<p>Pode ser implementado tanto on-premises quanto em ambientes de nuvem, oferecendo flexibilidade de acordo com os requisitos de infraestrutura da organiza\u00e7\u00e3o</p>"},{"location":"monitoramento-e-observabilidade/prometheus/configura%C3%A7%C3%A3o/","title":"Configura\u00e7\u00e3o","text":"<p>Para configurar o Prometheus para coletar m\u00e9tricas do Kong com SSL habilitado, voc\u00ea precisar\u00e1 garantir que o endpoint do Kong esteja configurado para suportar HTTPS e que o Prometheus possa se conectar a esse endpoint.</p>"},{"location":"monitoramento-e-observabilidade/prometheus/configura%C3%A7%C3%A3o/#ativar-o-plugin-do-prometheus-no-kong","title":"Ativar o Plugin do Prometheus no Kong","text":"<p>Ative o plugin Prometheus no Kong como anteriormente descrito, certificando-se de que est\u00e1 usando o endpoint HTTPS:</p> <pre><code>curl -i -X POST https://localhost:8444/plugins \\\n  --cacert /path/to/cert.pem \\\n  --data \"name=prometheus\"\n</code></pre>"},{"location":"monitoramento-e-observabilidade/prometheus/configura%C3%A7%C3%A3o/#configurar-o-prometheus-para-coletar-metricas-do-kong-via-https","title":"Configurar o Prometheus para Coletar M\u00e9tricas do Kong via HTTPS","text":"<p>Atualize o arquivo de configura\u00e7\u00e3o do Prometheus (prometheus.yml) para usar HTTPS ao coletar m\u00e9tricas do Kong. Certifique-se de incluir a configura\u00e7\u00e3o de tls_config para que o Prometheus use o certificado apropriado.</p> <pre><code>scrape_configs:\n\n- job_name: 'kong'\n    scheme: https\n    tls_config:\n      ca_file: /path/to/cert.pem\n      cert_file: /path/to/cert.pem\n      key_file: /path/to/key.pem\n    static_configs:\n  - targets: ['localhost:8444']\n</code></pre>"},{"location":"monitoramento-e-observabilidade/prometheus/configura%C3%A7%C3%A3o/#reinicie-o-prometheus","title":"Reinicie o Prometheus","text":"<p>Reinicie o Prometheus para aplicar as mudan\u00e7as.</p> <pre><code>systemctl restart prometheus\n</code></pre>"},{"location":"monitoramento-e-observabilidade/prometheus/introducao/","title":"Introdu\u00e7\u00e3o","text":"<p>Prometheus \u00e9 uma ferramenta de monitoramento e alerta de sistemas open-source, amplamente utilizado devido \u00e0s suas capacidades avan\u00e7adas de coleta de m\u00e9tricas e monitoramento em tempo real.</p> <p>A seguir est\u00e3o algumas raz\u00f5es pelas quais o Prometheus \u00e9 utilizado:</p>"},{"location":"monitoramento-e-observabilidade/prometheus/introducao/#coleta-de-metricas","title":"Coleta de M\u00e9tricas","text":"<p>Prometheus coleta m\u00e9tricas de v\u00e1rias fontes de dados em intervalos configur\u00e1veis. Isso inclui m\u00e9tricas de infraestrutura, aplica\u00e7\u00f5es e servi\u00e7os.</p>"},{"location":"monitoramento-e-observabilidade/prometheus/introducao/#modelo-de-dados","title":"Modelo de Dados","text":"<p>Utiliza um modelo de dados de s\u00e9ries temporais, onde os dados s\u00e3o armazenados como m\u00e9tricas rotuladas com pares de chave-valor. Isso facilita consultas e agrega\u00e7\u00f5es complexas.</p>"},{"location":"monitoramento-e-observabilidade/prometheus/introducao/#consulta-e-analise","title":"Consulta e An\u00e1lise","text":"<p>Possui uma linguagem de consulta poderosa chamada PromQL (Prometheus Query Language), que permite explorar e analisar dados de forma eficiente.</p>"},{"location":"monitoramento-e-observabilidade/prometheus/introducao/#alerting","title":"Alerting","text":"<p>Integra-se com o Alertmanager para definir e gerenciar regras de alerta baseadas nas m\u00e9tricas coletadas. Isso permite configurar alertas avan\u00e7ados e enviar notifica\u00e7\u00f5es quando determinadas condi\u00e7\u00f5es s\u00e3o atendidas.</p>"},{"location":"monitoramento-e-observabilidade/prometheus/introducao/#autossuficiencia","title":"Autossufici\u00eancia","text":"<p>Prometheus \u00e9 autossuficiente, ou seja, ele armazena os dados localmente e n\u00e3o depende de armazenamento remoto, o que simplifica a implementa\u00e7\u00e3o e reduz a lat\u00eancia.</p>"},{"location":"monitoramento-e-observabilidade/prometheus/introducao/#escalabilidade","title":"Escalabilidade","text":"<p>Escala bem em ambientes de grande porte devido ao seu design eficiente e \u00e0 capacidade de lidar com grandes volumes de dados.</p>"},{"location":"monitoramento-e-observabilidade/prometheus/introducao/#ecossistema-rico","title":"Ecossistema Rico","text":"<p>Possui um ecossistema robusto com muitos exportadores e integra\u00e7\u00f5es dispon\u00edveis para diversas tecnologias e plataformas (como Kubernetes, Docker, sistemas operacionais, bancos de dados, etc.)</p>"},{"location":"monitoramento-e-observabilidade/prometheus/introducao/#suporte-a-visualizacao","title":"Suporte \u00e0 Visualiza\u00e7\u00e3o","text":"<p>Prometheus se integra facilmente com ferramentas de visualiza\u00e7\u00e3o como Grafana, permitindo a cria\u00e7\u00e3o de dashboards detalhados para visualiza\u00e7\u00e3o de m\u00e9tricas.</p>"}]}